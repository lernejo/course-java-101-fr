<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<meta name="author" content="Loïc Ledoyen">
<title>Java 101</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;-webkit-tap-highlight-color:transparent}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge .cm {
  color: #999988;
  font-style: italic;
}
pre.rouge .cp {
  color: #999999;
  font-weight: bold;
}
pre.rouge .c1 {
  color: #999988;
  font-style: italic;
}
pre.rouge .cs {
  color: #999999;
  font-weight: bold;
  font-style: italic;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cpf {
  color: #999988;
  font-style: italic;
}
pre.rouge .err {
  color: #a61717;
  background-color: #e3d2d2;
}
pre.rouge .gd {
  color: #000000;
  background-color: #ffdddd;
}
pre.rouge .ge {
  color: #000000;
  font-style: italic;
}
pre.rouge .gr {
  color: #aa0000;
}
pre.rouge .gh {
  color: #999999;
}
pre.rouge .gi {
  color: #000000;
  background-color: #ddffdd;
}
pre.rouge .go {
  color: #888888;
}
pre.rouge .gp {
  color: #555555;
}
pre.rouge .gs {
  font-weight: bold;
}
pre.rouge .gu {
  color: #aaaaaa;
}
pre.rouge .gt {
  color: #aa0000;
}
pre.rouge .kc {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kd {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kn {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kp {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kr {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kt {
  color: #445588;
  font-weight: bold;
}
pre.rouge .k, pre.rouge .kv {
  color: #000000;
  font-weight: bold;
}
pre.rouge .mf {
  color: #009999;
}
pre.rouge .mh {
  color: #009999;
}
pre.rouge .il {
  color: #009999;
}
pre.rouge .mi {
  color: #009999;
}
pre.rouge .mo {
  color: #009999;
}
pre.rouge .m, pre.rouge .mb, pre.rouge .mx {
  color: #009999;
}
pre.rouge .sa {
  color: #000000;
  font-weight: bold;
}
pre.rouge .sb {
  color: #d14;
}
pre.rouge .sc {
  color: #d14;
}
pre.rouge .sd {
  color: #d14;
}
pre.rouge .s2 {
  color: #d14;
}
pre.rouge .se {
  color: #d14;
}
pre.rouge .sh {
  color: #d14;
}
pre.rouge .si {
  color: #d14;
}
pre.rouge .sx {
  color: #d14;
}
pre.rouge .sr {
  color: #009926;
}
pre.rouge .s1 {
  color: #d14;
}
pre.rouge .ss {
  color: #990073;
}
pre.rouge .s, pre.rouge .dl {
  color: #d14;
}
pre.rouge .na {
  color: #008080;
}
pre.rouge .bp {
  color: #999999;
}
pre.rouge .nb {
  color: #0086B3;
}
pre.rouge .nc {
  color: #445588;
  font-weight: bold;
}
pre.rouge .no {
  color: #008080;
}
pre.rouge .nd {
  color: #3c5d5d;
  font-weight: bold;
}
pre.rouge .ni {
  color: #800080;
}
pre.rouge .ne {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nf, pre.rouge .fm {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nl {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nn {
  color: #555555;
}
pre.rouge .nt {
  color: #000080;
}
pre.rouge .vc {
  color: #008080;
}
pre.rouge .vg {
  color: #008080;
}
pre.rouge .vi {
  color: #008080;
}
pre.rouge .nv, pre.rouge .vm {
  color: #008080;
}
pre.rouge .ow {
  color: #000000;
  font-weight: bold;
}
pre.rouge .o {
  color: #000000;
  font-weight: bold;
}
pre.rouge .w {
  color: #bbbbbb;
}
pre.rouge {
  background-color: #f8f8f8;
}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Java 101</h1>
<div class="details">
<span id="author" class="author">Loïc Ledoyen</span><br>
<span id="email" class="email"><a href="mailto:loic.ledoyen@gmail.com">loic.ledoyen@gmail.com</a></span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">Introduction</a>
<ul class="sectlevel2">
<li><a href="#_objectifs_du_langage">Objectifs du Langage</a></li>
<li><a href="#_adoption">Adoption</a></li>
</ul>
</li>
<li><a href="#_le_langage_java_première_partie">1. Le langage Java, première partie</a>
<ul class="sectlevel2">
<li><a href="#_point_dentrée_dun_programme_java">1.1. Point d’entrée d’un programme Java</a></li>
<li><a href="#_les_types">1.2. Les types</a></li>
<li><a href="#_les_variables">1.3. Les variables</a></li>
<li><a href="#_opérateurs">1.4. Opérateurs</a></li>
<li><a href="#_nommage">1.5. Nommage</a></li>
<li><a href="#_annotations">1.6. Annotations</a></li>
<li><a href="#_les_objets">1.7. Les Objets</a></li>
<li><a href="#_concevoir_un_objet">1.8. Concevoir un objet</a></li>
<li><a href="#_comparer_des_objets">1.9. Comparer des objets</a></li>
<li><a href="#_enum">1.10. Enum</a></li>
<li><a href="#_record">1.11. Record</a></li>
</ul>
</li>
<li><a href="#_le_langage_java_deuxième_partie">2. Le langage Java, deuxième partie</a>
<ul class="sectlevel2">
<li><a href="#_formes_conditionnelles">2.1. Formes conditionnelles</a></li>
<li><a href="#_boucles">2.2. Boucles</a></li>
<li><a href="#_exceptions">2.3. Exceptions</a></li>
<li><a href="#_interfaces">2.4. Interfaces</a></li>
<li><a href="#_classes_abstraites">2.5. Classes abstraites</a></li>
</ul>
</li>
<li><a href="#_le_langage_java_troisième_partie">3. Le langage Java, troisième partie</a>
<ul class="sectlevel2">
<li><a href="#_généricité">3.1. Généricité</a></li>
<li><a href="#_collections">3.2. Collections</a></li>
<li><a href="#_streams">3.3. Streams</a></li>
<li><a href="#_expressions_lambda">3.4. Expressions Lambda</a></li>
</ul>
</li>
<li><a href="#_le_langage_java_quatrième_partie">4. Le langage Java, quatrième partie</a>
<ul class="sectlevel2">
<li><a href="#_thread">4.1. Thread</a></li>
</ul>
</li>
<li><a href="#_solid">5. SOLID</a>
<ul class="sectlevel2">
<li><a href="#_exemple_pour_s_et_l">5.1. Exemple pour <strong>S</strong> et <strong>L</strong></a></li>
<li><a href="#_exemple_pour_o_et_d">5.2. Exemple pour <strong>O</strong> et <strong>D</strong></a></li>
<li><a href="#_exemple_pour_i">5.3. Exemple pour <strong>I</strong></a></li>
</ul>
</li>
<li><a href="#_écosystème_java">6. Écosystème Java</a>
<ul class="sectlevel2">
<li><a href="#_maven">6.1. Maven</a></li>
<li><a href="#_junit">6.2. JUnit</a></li>
</ul>
</li>
<li><a href="#_conclusion">Conclusion</a>
<ul class="sectlevel2">
<li><a href="#_pour_aller_plus_loin">Pour aller plus loin</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Java est un langage sorti en 1998 et développé par Sun Microsystems.</p>
</div>
<div class="paragraph">
<p>On fait la distinction entre la JVM (Java Virtual Machine) qui permet l’exécution d’un programme Java et le JDK (Java Development Kit), qui comprend la JVM, ainsi que les outils de développement permettant de créer un programme Java, notamment le compilateur.</p>
</div>
<div class="paragraph">
<p>En 2006, le compilateur et la machine virtuelle (JVM pour Java Virtual Machine) sont open-sourcés sous licence GNU.<br>
En 2009, Oracle acquiers Sun Microsystems et Java devient un produit Oracle.<br>
L’utilisation des binaires du JDK (Java Development Kit) produits par Oracle sont alors soumis à une license complexe pour les usages professionnels.</p>
</div>
<div class="paragraph">
<p>Il existe cependant d’autres distributions (la différence pour les entreprises étant le niveau de support possible) :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Eclipse Adoptium (anciennement AdoptOpenJDK)</p>
</li>
<li>
<p>Azul Zulu Builds of OpenJDK</p>
</li>
<li>
<p>Red Hat build of OpenJDK</p>
</li>
<li>
<p>Amazon Corretto</p>
</li>
<li>
<p>etc.</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
<div class="sect2">
<h3 id="_objectifs_du_langage">Objectifs du Langage</h3>
<div class="paragraph">
<p>Initialement, le langage Java est créé pour palier aux défauts de C++, et notamment la gestion manuelle de la mémoire, tout en gardant le côté <strong><em>orienté objet</em></strong>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>À cette fin le ramasse-miettes (Garbage Collector ou GC) est créé.<br>
Il s’agit d’un programme indépendant s’exécutant dans la JVM et dont le rôle est de scruter les objets qui ne sont plus référencés afin de libérer la mémoire correspondante.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Les créateurs du langage souhaitaient également que les programmes écrits en Java soient indépendants de la plateforme d’exécution (que ce soit Linux, Mac ou Windows).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Pour cela, un programme Java est d’abord compilé, ce qui produit du <em>byte code</em>.<br>
Ce <em>byte code</em> est ensuite interprété par la JVM qui <span class="underline">elle</span> dépend de la plateforme.</p>
</div>
<div class="paragraph">
<p>Un programme Java n’a donc pas besoin du bit d’exécution pour pouvoir être lancé sous Linux, car la JVM va lire (interpréter) les binaires précédemment compilés.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Par la suite, s’ajoutent à ces objectifs initiaux</p>
</div>
<div class="ulist">
<ul>
<li>
<p>une forte rétro-compatibilité, ce qui permettra une large adoption du langage</p>
</li>
<li>
<p>une efficacité à l’exécution grâce au compilateur JIT (Just In Time) qui optimise le <em>byte code</em> en analysant son utilisation.<br>
Cette technique est associée à un temps de chauffe, temps nécessaire au JIT pour "observer" l’utilisation qui est faite du <em>byte code</em>.</p>
</li>
<li>
<p>le support dans la bibliothèque standard d’un certain nombre de connecteurs (TCP, UDP, HTTP, etc.), de structures de données (<code>List</code>, <code>Set</code>, <code>Map</code>, etc.) et d’algorithmes (b-search, etc.)</p>
</li>
<li>
<p>une évolution constante permettant de s’adapter aux paradigmes modernes, comme la programmation fonctionnelle ou réactive</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Globalement, Java se veut un langage de haut niveau, facile d’accès et performant (ce point peut être débattu, car la JVM utilise une mémoire non négligeable).</p>
</div>
</div>
<div class="sect2">
<h3 id="_adoption">Adoption</h3>
<div class="paragraph">
<p>Java compte aujourd’hui parmi les languages les plus populaires en entreprise, pour les raisons précédentes, mais également grâce à un écosystème riche.</p>
</div>
<div class="paragraph">
<p>Dans cet écosystème on trouve notamment :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven et Gradle (et d’autres systèmes de construction moins répandus) qui permettent de gérer <em>simplement</em> un projet et ses dépendances</p>
</li>
<li>
<p>d’autres languages qui compilent vers du <em>byte code</em> (Groovy, Scala, Kotlin, etc.)</p>
</li>
<li>
<p>une communauté sans cesse croissante de programmeurs venant enrichir une grande collection de bibliothèques.</p>
</li>
<li>
<p>des IDE de très bonne qualité (IntelliJ, Eclipse, etc.)</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_le_langage_java_première_partie">1. Le langage Java, première partie</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_point_dentrée_dun_programme_java">1.1. Point d’entrée d’un programme Java</h3>
<div class="paragraph">
<p>Un programme java a un unique point d’entrée qui sera utilisé pour le lancer.</p>
</div>
<div class="paragraph">
<p>Ce point d’entrée, la fonction <code>main</code> est une méthode publique, statique, sans type de retour et prenant en paramètre un tableau de chaîne de caractères :</p>
</div>
<div class="listingblock">
<div class="title">Listing 1. Fichier Launcher.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Launcher</span> <span class="o">{</span> // <b class="conum">(1)</b>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(2)</b>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Hello "</span> <span class="o">+</span> <span class="o">(</span><span class="n">args</span><span class="o">.</span><span class="na">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">:</span> <span class="s">"World"</span><span class="o">));</span> // <b class="conum">(3)</b>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>La classe contenant la fonction <code>main</code> doit être publique</p>
</li>
<li>
<p>la <em>signature</em> de la méthode doit être exacte, si elle n’est pas statique ou publique ou que les paramètres ne sont pas un unique tableau de chaîne de caractères, la fonction ne sera pas reconnue</p>
</li>
<li>
<p>du code <em>procédural</em> peut être écrit à l’intérieur de cette méthode, en Java, les instructions doivent se terminer par un point-virgule <code>;</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Le paramètre de la fonction <code>main</code> correspond aux arguments passés au programme.</p>
</div>
<div class="paragraph">
<p>Par exemple :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">javac Launcher.java # <b class="conum">(1)</b>
jar <span class="nt">-cf</span> helloWorld.jar Launcher.class # <b class="conum">(2)</b>
java <span class="nt">-jar</span> helloWorld.jar Launcher Lernejo <span class="c"># Will display ’Hello Lernejo’ </span># <b class="conum">(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>compilation, cela va produire le fichier Launcher.class contenant du <em>byte code</em></p>
</li>
<li>
<p>création d’une archive Java contenant l’unique classe compilée</p>
</li>
<li>
<p>execution du programme, Java va chercher une fonction <code>main</code> dans la classe <code>Launcher</code> qui lui est indiquée comme point d’entrée, le tableau <code>args</code> aura une unique entrée, le seul paramètre qui est passé au programme : <code>"Lernejo"</code></p>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_les_types">1.2. Les types</h3>
<div class="paragraph">
<p>En Java il existe deux formes de type, les types <strong><em>primitifs</em></strong> et les types objets.</p>
</div>
<div class="paragraph">
<p>Les premiers commencent par une minuscule et représentent directement la donnée en mémoire :</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Nom</th>
<th class="tableblock halign-left valign-top">Nombre de bits</th>
<th class="tableblock halign-left valign-top">Valeurs possibles</th>
<th class="tableblock halign-left valign-top">Exemple</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32 (un <code>int</code> avec 0 ou 1 comme valeur)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true ou false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">entier positif ou négatif</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">short</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">entier positif ou négatif</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">entier positif ou négatif</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1452</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">entier positif ou négatif</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">164478945</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">float</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IEEE 754</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">124.54</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IEEE 754</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">124587451.1254878</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">char</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unicode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'h'</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Les seconds sont des objets et leurs noms commencent par une majuscule.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>C’est pourquoi il est important, quand on crée un nouveau type (classe, interface, enum ou record) que son nom commence par une <strong><span class="underline">Majuscule</span></strong>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_les_variables">1.3. Les variables</h3>
<div class="paragraph">
<p>Au sein d’une méthode, il est souvent nécessaire de stocker un résultat intermédiaire dans une variable.</p>
</div>
<div class="paragraph">
<p>En Java, une variable est en fait un référant, un "pointeur" vers une adresse mémoire.</p>
</div>
<div class="paragraph">
<p>Ainsi en écrivant <code>var b = a;</code>, on déclare un second référant <code>b</code> qui pointe vers la même adresse mémoire que <code>a</code>.</p>
</div>
<div class="paragraph">
<p>En Java, il est possible de déclarer une variable de plusieurs façons.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>String a;</code> : la variable n’est pas assignée, elle ne pointe vers rien, il est nécessaire de lui assigner une valeur afin de pouvoir l’utiliser par la suite.<br>
Par exemple : <code>a = "my-name";</code></p>
</li>
<li>
<p><code>int a = 43;</code> : la variable est déclarée et assignée, elle peut être utilisée, sa valeur peut également être changée.<br>
Par exemple : <code>a++;</code></p>
</li>
<li>
<p><code>final MyType a;</code> : la variable n’est pas assignée, mais grâce au mot-clé <code>final</code>, le compilateur va garantir qu’elle ne le sera qu’une unique fois.<br>
Par exemple :</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Listing 2. Fichier NameGenerator.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">NameGenerator</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">generateName</span><span class="o">(</span><span class="nc">FacialHairStyle</span> <span class="n">hairStyle</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(</span><span class="nc">Gender</span><span class="o">.</span><span class="na">BEARDED</span> <span class="o">==</span> <span class="n">hairStyle</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s">"Barbarossa"</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="nc">Gender</span><span class="o">.</span><span class="na">MUSTACHE</span> <span class="o">==</span> <span class="n">hairStyle</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s">"Jenkins"</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s">"Saitama"</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Enfin, il est également possible d’utiliser le mot-clé <code>var</code> si le type de la variable peut être <em>inféré</em> au moment de sa déclaration.<br>
Cet usage est à recommander aux endroits où la longueur d’un type diminue la lisibilité.<br>
Par exemple :</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Listing 3. Fichier OccurrenceUtils.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">OccurrenceUtils</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="nf">mostOccurring</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">strings</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="n">freqMap</span> <span class="o">=</span> <span class="n">strings</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
            <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">groupingBy</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="o">,</span> <span class="nc">Collectors</span><span class="o">.</span><span class="na">counting</span><span class="o">()));</span>
        <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;&gt;</span> <span class="n">maxEntryOpt</span> <span class="o">=</span> <span class="n">freqMap</span><span class="o">.</span><span class="na">entrySet</span><span class="o">()</span>
            <span class="o">.</span><span class="na">stream</span><span class="o">()</span>
            <span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="nc">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">.</span><span class="na">comparingByValue</span><span class="o">());</span>
        <span class="k">return</span> <span class="n">maxEntryOpt</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nc">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">::</span><span class="n">getKey</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Peut être simplifié :</p>
</div>
<div class="listingblock">
<div class="title">Listing 4. Fichier OccurrenceUtils.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">OccurrenceUtils</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="nf">mostOccurring</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">strings</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">var</span> <span class="n">freqMap</span> <span class="o">=</span> <span class="n">strings</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
            <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">groupingBy</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="o">,</span> <span class="nc">Collectors</span><span class="o">.</span><span class="na">counting</span><span class="o">()));</span>
        <span class="kt">var</span> <span class="n">maxEntryOpt</span> <span class="o">=</span> <span class="n">freqMap</span><span class="o">.</span><span class="na">entrySet</span><span class="o">()</span>
            <span class="o">.</span><span class="na">stream</span><span class="o">()</span>
            <span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="nc">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">.</span><span class="na">comparingByValue</span><span class="o">());</span>
        <span class="k">return</span> <span class="n">maxEntryOpt</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nc">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">::</span><span class="n">getKey</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_opérateurs">1.4. Opérateurs</h3>
<div class="paragraph">
<p>Il existe plusieurs opérateurs en Java.</p>
</div>
<div class="paragraph">
<p>Opérateurs de calculs :</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Opérateur</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exemple</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Additionne deux nombres ou concatène deux chaînes de caractères</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 + a</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Soustrait deux nombres</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8 - a</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiplie deux nombres</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">b * 4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Divise deux nombres</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a / 2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modulo (reste de la division entière)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a % 3</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Les opérateurs d’assignations stockent le résultat du calcul dans l’opérande de gauche :</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Opérateur</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exemple</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Additionne deux nombres ou concatène deux chaînes de caractères</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a += "toto"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Soustrait deux nombres</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a -= 3.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Divise deux nombres</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">b /= 2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">*=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiplie deux nombres</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a *= 2</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Les opérateurs d’assignations peuvent être écrits avec les opérateurs de calculs.<br>
Par exemple <code>b /= 2;</code> est équivalent à <code>b = b / 2;</code>.</p>
</div>
<div class="paragraph">
<p>Les opérateurs d’incrémentation peuvent être placés à gauche ou à droite d’une variable de façon à ce que l’opération soit réalisée avant ou après l’exploitation du résultat.</p>
</div>
<div class="paragraph">
<p>Par exemple, dans <code>array[++i] = 0 ;</code>, c’est la valeur de <code>i</code> <em><span class="underline">après</span></em> l’incrémentation qui est utilisée comme index du tableau.<br>
A contrario, dans <code>array[i--] = 0 ;</code>, c’est la valeur de <code>i</code> <em><span class="underline">avant</span></em> la décrémentation qui est utilisée comme index du tableau.</p>
</div>
<div class="paragraph">
<p>Les opérateurs de comparaison, renvoient vrai si&#8230;&#8203;</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Opérateur</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exemple</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">==</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203; les deux valeurs ont la même adresse mémoire</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a == 3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">!=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203; les deux valeurs n’ont pas la même adresse mémoire</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a != 3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203; le nombre de gauche est plus petit (strictement) que celui de droite</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a &lt; 3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8656;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203; le nombre de gauche est plus petit ou égal à celui de droite</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a &#8656; 3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203; le nombre de gauche est plus grand (strictement) que celui de droite</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a &gt; 3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203; le nombre de gauche est plus grand ou égal à celui de droite</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a &gt;= 3</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Certains opérateurs logiques peuvent s’appliquer sur les entiers, auxquels cas ils fonctionnent bit à bit.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Opérateur</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cible</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exemple</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&amp;&amp;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AND</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a &amp;&amp; b</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">||</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a || b</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&amp;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AND</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean et entiers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a &amp; b</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">|</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean et entiers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a | b</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">^</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XOR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean et entiers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a ^ b</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Les opérateurs de décalage de bit :</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Opérateur</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Propagation du signe</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exemple</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Décale les bits vers la gauche (multiplie par 2 à chaque décalage).<br>
Les bits qui sortent à gauche sont perdus, et des zéros sont insérés à droite</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">oui</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6 &lt;&lt; 2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Décale les bits vers la droite (divise par 2 à chaque décalage).<br>
Les bits qui sortent à droite sont perdus, et le bit non-nul de poids plus fort est recopié à gauche</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">oui</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6 &gt;&gt; 2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;&gt;&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Décale les bits vers la droite (divise par 2 à chaque décalage).<br>
Les bits qui sortent à droite sont perdus, et des zéros sont insérés à gauche</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6 &gt;&gt;&gt; 2</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>L’opérateur <code>instanceof</code> renvoit vrai si le type de l’objet testé, est égal à, ou égal à un sous-type de, l’opérande de droite.<br>
Par exemple :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="k">if</span> <span class="o">(</span><span class="n">a</span> <span class="k">instanceof</span> <span class="nc">ArrayList</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// ... </span>// <b class="conum">(1)</b>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>l’execution entrera dans le bloc si l’objet pointé par la variable <code>a</code> est de type <code>ArrayList</code> ou d’un sous-type d’ <code>ArrayList</code></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_nommage">1.5. Nommage</h3>
<div class="paragraph">
<p>Le nommage a un intérêt prépondérant dans le paradigme objet où le développeur essaie d’exprimer des concepts réels.<br>
Les classes, les champs, les méthodes, les variables, tous doivent avoir un nom clair et représentatif du rôle que joue le composant.<br>
Les noms peuvent être relativement longs sans que ce soit un problème.<br>
La convention en Java est le <code>camelCase</code> de manière générale, l’ <code>UpperCamelCase</code> pour les types (nom de classe, d’interface, d’enum ou de record).<br>
On peut également trouver/utiliser le <code>lower_snake_case</code> pour les noms des méthodes de test.</p>
</div>
</div>
<div class="sect2">
<h3 id="_annotations">1.6. Annotations</h3>
<div class="paragraph">
<p>Les annotations sont des <em>marqueurs</em> qu’il est possible de placer à différents endroits afin</p>
</div>
<div class="ulist">
<ul>
<li>
<p>de marquer un morceau de code visuellement sans que cela ait un impact sur le comportement du code</p>
</li>
<li>
<p>déclencher un comportement à la compilation / construction</p>
</li>
<li>
<p>déclencher un comportement en <em>runtime</em> (durant l’exécution)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Java fournit entre autre l’annotation <code>@Override</code> qui permet de déclarer une méthode comme étant une surcharge d’une méthode parente.<br>
Si jamais il n’existe pas (ou plus) une telle méthode parente, cela provoquera une erreur de compilation.</p>
</div>
<div class="listingblock">
<div class="title">Listing 5. Fichier Watchable.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Watchable</span> <span class="o">{</span>

    <span class="nc">String</span> <span class="nf">name</span><span class="o">();</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Listing 6. Fichier Movie.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Movie</span> <span class="kd">implements</span> <span class="nc">Watchable</span> <span class="o">{</span> // <b class="conum">(1)</b>
    <span class="kd">public</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Movie</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span> // <b class="conum">(2)</b>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">name</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>La classe <code>Movie</code> déclare qu’elle <em>implémente</em> l’interface <code>Watchable</code></p>
</li>
<li>
<p>l’annotation ici déclare la méthode <code>name</code> comme étant la surcharge d’une définition dans la hiérarchie de la classe.<br>
Supprimer la méthode de l’interface, ou enlever la référence à l’interface provoquera une erreur de compilation.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Ce mécanisme est utile lorsqu’on implémente ou surcharge une méthode définie dans la bibliothèque standard ou dans une bibliothèque tierce.<br>
Faire une mise à jour de la bibliothèque en question peut changer les définitions connues, et dans ce cas la compilation permet d’identifier qu’il y a quelque-chose à adapter.</p>
</div>
</div>
<div class="sect2">
<h3 id="_les_objets">1.7. Les Objets</h3>
<div class="paragraph">
<p>Un objet est constitué de données (son état) <strong><span class="underline">et</span></strong> de comportements.</p>
</div>
<div class="paragraph">
<p>L’état est représenté par des champs, et le comportement par des méthodes.</p>
</div>
<div class="paragraph">
<p>Un objet est une instance de classe.</p>
</div>
<div class="sect3">
<h4 id="_anatomie_dune_classe">1.7.1. Anatomie d’une classe</h4>
<div class="listingblock">
<div class="title">Listing 7. Fichier Cat.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kn">package</span> <span class="nn">com.lernejo.animals</span><span class="o">;</span> // <b class="conum">(1)</b>

<span class="kn">import</span> <span class="nn">java.util.Random</span><span class="o">;</span> // <b class="conum">(2)</b>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Cat</span> <span class="o">{</span> // <b class="conum">(3)</b>
    <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">sleeping</span><span class="o">;</span> // <b class="conum">(4)</b>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">tryToWakeUp</span><span class="o">()</span> <span class="o">{</span> // <b class="conum">(5)</b>
        <span class="k">if</span> <span class="o">(!</span><span class="n">sleeping</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"The cat is already awake"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">sleeping</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Random</span><span class="o">().</span><span class="na">nextBoolean</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">sleeping</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>package</p>
</li>
<li>
<p>imports</p>
</li>
<li>
<p>définition de la classe <code>Cat</code>, son contenu commence après l’accolade ouvrante et se termine avant la dernière accolade fermante</p>
</li>
<li>
<p>champs</p>
</li>
<li>
<p>méthodes</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Le package (équivalent du namespace en C++ ou C#) dans lequel se trouve la classe est une façon d’organiser son code afin :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>de ne pas avoir des milliers de fichiers dans le même répertoire</p>
</li>
<li>
<p>de faire cohabiter des objets de même nom dans des contextes différents, par exemple</p>
<div class="ulist">
<ul>
<li>
<p><code>org.junit.jupiter.api.Assertions</code> classe utilitaire fournie par la bibliothèque JUnit</p>
</li>
<li>
<p><code>org.assertj.core.api.Assertions</code> classe utilitaire fournie par la bibliothèque AssertJ</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>La concaténation du package et du nom de la classe est appelé chemin qualifié.</p>
</div>
<div class="paragraph">
<p>Une classe doit être dans une hiérarchie de répertoires correspondante au package déclaré en entête.<br>
C&#8217;est-à-dire que la classe ci-dessus doit être compilée comme ceci : <code>javac com/lernejo/animals/Cat.java</code></p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Les imports, permettent d’utiliser des types qui ne sont pas dans le même package ou dans le package <code>java.lang</code>.<br>
Accompagné du mot clé <code>static</code> (<code>import static &#8230;&#8203;</code>), un import permet d’utiliser une méthode statique sans avoir à la préfixer par la classe la contenant.</p>
</div>
<div class="paragraph">
<p>Les champs contiennent l’état de l’objet.<br>
Ils sont la plupart du temps <code>private</code> afin de pas être accessibles à l’extérieur de la classe qui les déclare.</p>
</div>
<div class="paragraph">
<p>Ils peuvent être également <code>final</code> si leur état ne doit pas changer après la construction de l’objet.<br>
Un objet dont tous les champs sont <code>final</code> est dit <em>immutable</em>.</p>
</div>
<div class="paragraph">
<p>Les méthodes d’un objet représentent son comportement.<br>
Leur visibilité peut être changée, afin de structurer le code.<br>
Une méthode a un unique type de retour, qui peut être <code>void</code> dans le cas où la méthode ne retourne pas de donnée à la suite de son exécution.<br>
Une méthode peut également prendre zéro, un ou plusieurs paramètres.<br>
Le nombre de lignes d’une méthode doit être raisonnable afin que sa compréhension puisse se faire rapidement.</p>
</div>
</div>
<div class="sect3">
<h4 id="_constructeurs">1.7.2. Constructeurs</h4>
<div class="listingblock">
<div class="title">Listing 8. Fichier Cat.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Cat</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span> // <b class="conum">(1)</b>

    <span class="kd">public</span> <span class="nf">Cat</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(2)</b>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span> // <b class="conum">(3)</b>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Ici le champ est <code>public</code>, mais <code>final</code>, donc il n’est pas modifiable une fois l’objet créé</p>
</li>
<li>
<p>un constructeur prenant un paramètre de type String</p>
</li>
<li>
<p>Assignation de la valeur du paramètre <code>name</code> au champs <code>name</code> de la classe <code>Cat</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Un constructeur est une méthode particulière qui n’a pas de type de retour et dont le nom doit scrupuleusement être le même que celui de la classe dans laquelle il est déclaré.</p>
</div>
<div class="paragraph">
<p>Le constructeur est, comme son nom l’indique appelé à la construction de l’objet.</p>
</div>
<div class="paragraph">
<p>Pour construire un objet on utilise le mot clé <code>new</code>.<br>
Par exemple :</p>
</div>
<div class="listingblock">
<div class="title">Listing 9. Fichier Launcher.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Launcher</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Cat</span> <span class="n">myCat</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Cat</span><span class="o">(</span><span class="s">"Georges"</span><span class="o">);</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">myCat</span><span class="o">.</span><span class="na">name</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Une classe peut avoir autant de constructeurs qu’on le souhaite.</p>
</div>
<div class="paragraph">
<p>Une classe qui ne déclare aucun constructeur explicitement possède un <em>constructeur par défaut</em>.<br>
Le constructeur par défaut ne prend aucun paramètre et ne fait rien.<br>
À partir du moment où un constructeur est déclaré explicitement, le constructeur par défaut n’est plus disponible.</p>
</div>
</div>
<div class="sect3">
<h4 id="_visibilité">1.7.3. Visibilité</h4>
<div class="paragraph">
<p>La visibilité est un mécanisme qui permet à une classe, un champ, ou une méthode d’être accessible ou non à d’autres entités.</p>
</div>
<div class="paragraph">
<p>Il existe 4 visibilités en Java</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>public</code> : accessible à tous</p>
</li>
<li>
<p><code>private</code> : accessible uniquement au sein de la classe qui déclare le composant</p>
</li>
<li>
<p><code>protected</code> : accessible aux classes qui étendent la classe qui contient le composant ou aux classes qui se trouvent dans le même <code>package</code>.</p>
</li>
<li>
<p>la visibilité par défaut, dite aussi <strong><em>package protected</em></strong>, quand aucun modificateur de visibilité n’est précisé.<br>
Le composant est question est alors accessible aux classes se trouvant dans le même package.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Quand on conçoit un programme orienté objet, on va regrouper dans un même package les objets du même domaine, et leurs interactions spécifiques à ce domaine seront <strong><em>package protected</em></strong>.<br>
Les comportements intrinsèques aux objets de ce domaine seront <code>private</code>, alors que l’API (Application Programming Interface) accessible au reste du programme sera <code>public</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_concevoir_un_objet">1.8. Concevoir un objet</h3>
<div class="paragraph">
<p>Un objet doit (dans la majorité des cas) être construit de telle sorte qu’il n’expose pas <em>à l’extérieur</em> la façon dont il représente son état.</p>
</div>
<div class="paragraph">
<p>Tout l’enjeu de la programmation orientée objet est de réduire le couplage entre les concepts pour simplifier la maintenance, l’évolution et la testabilité du code.</p>
</div>
<div class="paragraph">
<p>Un mauvais exemple :</p>
</div>
<div class="listingblock">
<div class="title">Listing 10. Fichier TrafficLight.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">class</span> <span class="nc">TrafficLight</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="n">color</span><span class="o">;</span> // <b class="conum">(1)</b>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setColor</span><span class="o">(</span><span class="kt">int</span> <span class="n">newColor</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(2)</b>
        <span class="k">this</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">newColor</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getColor</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">color</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>donnée privée, propre à l’objet</p>
</li>
<li>
<p>méthode publique permettant de changer la "couleur" du feu</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Ici la classe représentant le feu tricolore expose la façon dont elle stocke ses données, et elle ne contient aucune logique.<br>
Un tel objet est dit <em>anémique</em>, car il n’a aucun comportement propre et est considéré dans la majorité des cas comme une mauvaise pratique (code smell).<br>
Un autre objet qui utilise cette classe devra lui aussi changer si le type du champ <code>color</code> (&lt;1&gt;) change.</p>
</div>
<div class="paragraph">
<p>Un meilleur design pourrait être :</p>
</div>
<div class="listingblock">
<div class="title">Listing 11. Fichier TrafficLight.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">class</span> <span class="nc">TrafficLight</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="n">color</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nc">Color</span> <span class="nf">nextState</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">color</span> <span class="o">=</span> <span class="o">(</span><span class="n">color</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">%</span> <span class="mi">3</span><span class="o">;</span>
        <span class="k">return</span> <span class="nc">Color</span><span class="o">.</span><span class="na">values</span><span class="o">()[</span><span class="n">color</span><span class="o">];</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">enum</span> <span class="nc">Color</span> <span class="o">{</span>
        <span class="no">GREEN</span><span class="o">,</span>
        <span class="no">ORANGE</span><span class="o">,</span>
        <span class="no">RED</span><span class="o">,</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ainsi le "contrat", c’est-à-dire la partie publique de la classe, ne dépend pas de la façon dont l’état est stocké en mémoire, ici avec un <code>int</code>.<br>
Par ailleurs, la logique du feu est codée dans l’objet, rendant impossible les cas qui l’étaient avec l’implémentation précédente :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>trafficLight.setColor(4)</code>, mais que veut dire la valeur 4 ?</p>
</li>
<li>
<p>passage du vert au rouge ou du rouge à l’orange</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_comparer_des_objets">1.9. Comparer des objets</h3>
<div class="paragraph">
<p>En Java, l’opérateur <code>==</code> permet de comparer que deux objets ont bien la même <span class="underline">adresse mémoire</span>.</p>
</div>
<div class="paragraph">
<p>Cependant, dans la majorité de cas, il est nécessaire de comparer si deux objets ont la même <span class="underline">valeur</span>.<br>
Dans ce cas, on utilisera la méthode <code>equals</code>.<br>
Cette méthode est déclarée sur la classe <code>java.lang.Object</code> dont tous les objets héritent implicitement.<br>
Par défaut le comportement de cette méthode est d’utiliser l’opérateur <code>==</code>, mais elle est surchargeable !</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. Fichier Cat.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Cat</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">color</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Cat</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="kt">int</span> <span class="n">color</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">color</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="nc">Object</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(1)</b>
        <span class="k">if</span> <span class="o">(</span><span class="k">this</span> <span class="o">==</span> <span class="n">o</span><span class="o">)</span> <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">o</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">getClass</span><span class="o">()</span> <span class="o">!=</span> <span class="n">o</span><span class="o">.</span><span class="na">getClass</span><span class="o">())</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="nc">Cat</span> <span class="n">that</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Cat</span><span class="o">)</span> <span class="n">o</span><span class="o">;</span>
        <span class="k">return</span> <span class="n">color</span> <span class="o">==</span> <span class="n">that</span><span class="o">.</span><span class="na">color</span> <span class="o">&amp;&amp;</span> <span class="nc">Objects</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">that</span><span class="o">.</span><span class="na">name</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">hashCode</span><span class="o">()</span> <span class="o">{</span> // <b class="conum">(2)</b>
        <span class="k">return</span> <span class="nc">Objects</span><span class="o">.</span><span class="na">hash</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">color</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>La surcharge de la méthode <code>equals</code> pour un objet de type <code>Cat</code> va retourner <code>true</code> pour tout paramètre qui est un objet de type <code>Cat</code> également et dont la couleur (<code>color</code>) et le nom (<code>name</code>) sont les mêmes.</p>
</li>
<li>
<p>La méthode <code>equals</code> est toujours définie <span class="underline">avec</span> la méthode <code>hashCode</code>.<br>
La méthode hashCode est utilisée dans plusieurs algorithmes liés à l’identité, notamment dans les <em>collections</em> et on considère que son comportement <span class="underline">doit</span> être cohérent avec celui de la méthode <code>equals</code>.<br>
C’est-à-dire que deux objets qui sont égaux au sens de la méthode <code>equals</code> doivent avoir le même <code>hashCode</code>, la réciproque n’est pas vrai, deux objets ayant le même <code>hashCode</code> ne sont pas forcément égaux (dans ce cas on parle de collision).</p>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_enum">1.10. Enum</h3>
<div class="paragraph">
<p>Les types énumérés sont des classes dont les instances possibles sont limitées et uniques.<br>
Il n’est pas possible de créer de nouvelles instances d’un type énuméré avec le mot-clé <code>new</code>.<br>
Les valeurs d’un type énuméré peuvent être assimilées à des constantes et accédées de la même façon.</p>
</div>
<div class="listingblock">
<div class="title">Listing 13. Fichier FacialHairStyle.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">enum</span> <span class="nc">FacialHairStyle</span> <span class="o">{</span> // <b class="conum">(1)</b>

    <span class="no">BEARDED</span><span class="o">,</span> // <b class="conum">(2)</b>
    <span class="no">MUSTACHE</span><span class="o">,</span>
    <span class="no">BOLD</span><span class="o">,</span>
    <span class="o">;</span>

    // <b class="conum">(3)</b>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">isBold</span><span class="o">(</span><span class="nc">FacialHairStyle</span> <span class="n">hairStyle</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">FacialHairStyle</span><span class="o">.</span><span class="na">BOLD</span> <span class="o">==</span> <span class="n">hairStyle</span><span class="o">;</span> // <b class="conum">(3)</b>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>la structure d’un type énuméré est proche de celle d’une classe, mais on remplace le mot-clé <code>class</code> par <code>enum</code></p>
</li>
<li>
<p>le contenu d’un enum commence toujours par la liste des différentes valeurs possibles, séparées par des virgules <code>,</code> et se terminant par un point-virgule <code>;</code></p>
</li>
<li>
<p>la suite du contenu est la même que pour les classes, champs, constructeurs et méthodes peuvent être ajoutés</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Un enum peut avoir un constructeur, quand les valeurs de l’enum sont associées à de la donnée.<br>
Cependant le constructeur d’un enum est implicitement <code>protected</code> et ne peut pas être préfixé par le mot-clé <code>public</code>.</p>
</div>
<div class="listingblock">
<div class="title">Listing 14. Fichier FacialHairStyle.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">enum</span> <span class="nc">Environment</span> <span class="o">{</span>

    <span class="no">DEV</span><span class="o">(</span><span class="s">"http://localhost:9876/my-app"</span><span class="o">,</span> <span class="nc">ZoneOffset</span><span class="o">.</span><span class="na">systemDefault</span><span class="o">()),</span> // <b class="conum">(1)</b>
    <span class="no">TEST</span><span class="o">(</span><span class="s">"https://beta.mydomain.com/"</span><span class="o">,</span> <span class="nc">ZoneOffset</span><span class="o">.</span><span class="na">UTC</span><span class="o">),</span>
    <span class="no">PROD</span><span class="o">(</span><span class="s">"https://app.mydomain.com/"</span><span class="o">,</span> <span class="nc">ZoneOffset</span><span class="o">.</span><span class="na">UTC</span><span class="o">),</span>
    <span class="o">;</span>

    <span class="kd">public</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">baseUrl</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="nc">ZoneId</span> <span class="n">zoneId</span><span class="o">;</span>

    <span class="nc">Environment</span><span class="o">(</span><span class="nc">String</span> <span class="n">baseUrl</span><span class="o">,</span> <span class="nc">ZoneId</span> <span class="n">zoneId</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(2)</b>
        <span class="k">this</span><span class="o">.</span><span class="na">baseUrl</span> <span class="o">=</span> <span class="n">baseUrl</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">zoneId</span> <span class="o">=</span> <span class="n">zoneId</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>l’utilisation du constructeur se fait par l’ajout de paramètres entre parenthèses après chaque valeur</p>
</li>
<li>
<p>le constructeur s’écrit comme celui d’une classe</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Un enum peut implémenter une interface, mais ne peut pas étendre une classe abstraite.</p>
</div>
<div class="paragraph">
<p>Par ailleurs un enum est implicitement <code>final</code> et ne peut pas être étendu.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_record">1.11. Record</h3>
<div class="paragraph">
<p>Un record permet de décrire de manière concise une classe <em>anémique</em> (sans comportement) et immutable.<br>
Ainsi les méthodes <code>equals</code>, <code>hashCode</code>, <code>toString</code> ainsi que les accesseurs sont générés de manière à refléter les paramètres du record.</p>
</div>
<div class="listingblock">
<div class="title">Listing 15. Fichier LocalTemperature.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="n">record</span> <span class="nf">LocalTemperature</span><span class="o">(</span>
    <span class="kt">double</span> <span class="n">temperature</span><span class="o">,</span>
    <span class="kt">double</span> <span class="n">latitude</span><span class="o">,</span>
    <span class="kt">double</span> <span class="n">longitude</span><span class="o">){}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Listing 16. Fichier Launcher.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Launcher</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">var</span> <span class="n">t1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LocalTemperature</span><span class="o">(</span><span class="mf">12.3</span><span class="no">D</span><span class="o">,</span> <span class="mf">48.8320315</span><span class="no">D</span><span class="o">,</span> <span class="mf">2.2277601</span><span class="no">D</span><span class="o">);</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">t1</span><span class="o">.</span><span class="na">temperature</span><span class="o">());</span> // <b class="conum">(1)</b>

        <span class="kt">var</span> <span class="n">temperatureList</span> <span class="o">=</span> <span class="nc">Set</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">t1</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">temperatureList</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="k">new</span> <span class="nc">LocalTemperature</span><span class="o">(</span><span class="mf">12.3</span><span class="no">D</span><span class="o">,</span> <span class="mf">48.8320315</span><span class="no">D</span><span class="o">,</span> <span class="mf">2.2277601</span><span class="no">D</span><span class="o">)));</span> <span class="c1">// Displays true </span>// <b class="conum">(2)</b>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">t1</span><span class="o">);</span> <span class="c1">// Displays LocalTemperature[temperature=12.3, latitude=48.8320315, longitude=2.2277601] </span>// <b class="conum">(3)</b>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>utilisation d’un des accesseurs générés</p>
</li>
<li>
<p>utilisation des méthodes générées <code>equals</code> et <code>hashCode</code> par l’algorithme du <code>HashSet</code> (complexité en O(1))</p>
</li>
<li>
<p>utilisation de la méthode générée <code>toString</code></p>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_le_langage_java_deuxième_partie">2. Le langage Java, deuxième partie</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_formes_conditionnelles">2.1. Formes conditionnelles</h3>
<div class="sect3">
<h4 id="_if_else_if_else">2.1.1. if / else if / else</h4>
<div class="paragraph">
<p>Le mot clé <code>if</code> permet d’exécuter de manière conditionnelle un bloc de code.<br>
Celui-ci prend en paramètre une expression dont le résultat est de type <code>boolean</code>.</p>
</div>
<div class="paragraph">
<p>On peut chainer les exécutions conditionnelles avec le mot clé <code>else</code>.</p>
</div>
<div class="paragraph">
<p>Par exemple :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="k">if</span> <span class="o">(</span><span class="n">a</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// ... </span>// <b class="conum">(1)</b>
<span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">b</span> <span class="o">==</span> <span class="mi">2</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// ... </span>// <b class="conum">(2)</b>
<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="c1">// ... </span>// <b class="conum">(3)</b>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>ce bloc sera exécuté si <code>a</code> vaut 1</p>
</li>
<li>
<p>ce bloc sera exécuté si <code>a</code> ne vaut pas 1 <strong>et</strong> que <code>b</code> vaut 2</p>
</li>
<li>
<p>ce bloc sera exécuté si <code>a</code> ne vaut pas 1 <strong>et</strong> que <code>b</code> ne vaut pas 2</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_switch">2.1.2. switch</h4>
<div class="paragraph">
<p>Dans le cas d’une condition determinée sur la base d’une seule variable, on peut utiliser les mots-clés <code>switch</code> et <code>case</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="k">switch</span><span class="o">(</span><span class="n">a</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
        <span class="c1">// ... </span>// <b class="conum">(1)</b>
        <span class="k">break</span><span class="o">;</span> // <b class="conum">(2)</b>
    <span class="k">case</span> <span class="mi">45</span><span class="o">:</span>
        <span class="c1">// ... </span>// <b class="conum">(3)</b>
    <span class="k">default</span><span class="o">:</span>
       <span class="c1">// ... </span>// <b class="conum">(4)</b>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>ce bloc sera exécuté si <code>a</code> vaut 1</p>
</li>
<li>
<p>mot-clé permettant de sortir du <code>switch</code></p>
</li>
<li>
<p>ce bloc sera exécuté si <code>a</code> vaut 45</p>
</li>
<li>
<p>ce bloc sera exécuté si <code>a</code> ne vaut pas 1</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Le problème de cette écriture est qu’il est facile d’oublier le mot-clé <code>break</code> et d’introduire un bug dans lequel plusieurs branches seront exécutées.<br>
Dans notre exemple, si la valeur de <code>a</code> est 45, le <code>case</code> correspondant sera exécuté, ainsi que le bloc <code>default</code>.</p>
</div>
<div class="paragraph">
<p>Pour remédier à cela il existe une seconde écriture, dite <em>expression switch</em> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">String</span> <span class="n">label</span> <span class="o">=</span> <span class="k">switch</span> <span class="o">(</span><span class="n">experience</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">case</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"case 1 and 2"</span><span class="o">);</span>
        <span class="n">yield</span> <span class="s">"Beginner and junior"</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">case</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span> <span class="o">-&gt;</span> <span class="s">"Experienced and senior"</span><span class="o">;</span>
    <span class="k">case</span> <span class="mi">5</span>    <span class="o">-&gt;</span> <span class="s">"Expert"</span><span class="o">;</span>
    <span class="k">default</span>   <span class="o">-&gt;</span> <span class="k">throw</span> <span class="k">new</span> <span class="nc">IllegalArgumentException</span><span class="o">(</span><span class="s">"invalid value"</span><span class="o">);</span>
<span class="o">};</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Avec cette syntaxe, pas de <code>break</code>, c’est la valeur à droite de la flèche <code>&#8594;</code> qui est retournée, il n’y a donc plus d’ambiguïté.<br>
Dans le cas où la logique prend plus d’une expression, on indique la valeur à retourner avec le mot-clé <code>yield</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_opérateur_ternaire">2.1.3. Opérateur ternaire</h4>
<div class="paragraph">
<p>L’opérateur ternaire permet d’écrire un bloc <code>if</code> à deux branches de manière simple :<br>
<code>int a = "toto".equals(b) ? 3 : 0;</code><br>
est équivalent à</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kt">int</span> <span class="n">a</span><span class="o">;</span>
<span class="k">if</span> <span class="o">(</span><span class="s">"toto"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">b</span><span class="o">))</span> <span class="o">{</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span>
<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_boucles">2.2. Boucles</h3>
<div class="sect3">
<h4 id="_for">2.2.1. for</h4>
<div class="paragraph">
<p>Une boucle <code>for</code> est une boucle dans laquelle on accède à l’index de l’itération courante.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="o">;</span> <span class="n">index</span><span class="o">++)</span> <span class="o">{</span> // <b class="conum">(1)</b>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">index</span><span class="o">);</span> // <b class="conum">(2)</b>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>déclaration d’une variable <code>index</code> qui prendra les valeurs de 1 à 4 exclus avec un pas de 1</p>
</li>
<li>
<p>cette ligne sera exécutée 3 fois avec les valeurs d’<code>index</code> 1, 2 et 3</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_for_each">2.2.2. for each</h4>
<div class="paragraph">
<p>Les boucles <code>for</code> peuvent être utilisée pour parcourir les élèments d’un tableau ou d’une <em>collection</em>.<br>
Ainsi on peut écrire :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">String</span><span class="o">[]</span> <span class="n">names</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">String</span><span class="o">[]</span> <span class="o">{</span><span class="s">"Jake"</span><span class="o">,</span> <span class="s">"Rosa"</span><span class="o">,</span> <span class="s">"Raymond"</span><span class="o">,</span> <span class="s">"Gina"</span><span class="o">};</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="n">names</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">index</span><span class="o">++)</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">names</span><span class="o">[</span><span class="n">index</span><span class="o">];</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">name</span><span class="o">.</span><span class="na">toLowerCase</span><span class="o">());</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ici l’index n’est pas utilisé directement, c’est un moyen d’accéder à chacune des valeurs du tableau.<br>
Il est plus idiomatique dans ce cas d’utiliser un boucle <em>for each</em> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">String</span><span class="o">[]</span> <span class="n">names</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">String</span><span class="o">[]</span> <span class="o">{</span><span class="s">"Jake"</span><span class="o">,</span> <span class="s">"Rosa"</span><span class="o">,</span> <span class="s">"Raymond"</span><span class="o">,</span> <span class="s">"Gina"</span><span class="o">};</span>
<span class="k">for</span> <span class="o">(</span><span class="nc">String</span> <span class="n">name</span> <span class="o">:</span> <span class="n">names</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(1)</b>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">name</span><span class="o">.</span><span class="na">toLowerCase</span><span class="o">());</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>la variable <code>name</code> va pointer successivement sur tous les élèments du tableau</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>On peut mettre dans l’opérande de droite d’un <em>for each</em> un tableau ou tout objet implémentant l’interface <code>java.lang.Iterable</code>.<br>
Cette interface est l’expression minimale dont a besoin un ensemble d’objets (telle qu’une liste) pour être parcouru.</p>
</div>
</div>
<div class="sect3">
<h4 id="_while">2.2.3. while</h4>
<div class="paragraph">
<p>Les boucles <code>while</code> permettent d’exécuter un bloc de code tant qu’une expression est <em>vraie</em>.</p>
</div>
<div class="listingblock">
<div class="title">Listing 17. Fichier TcpServer.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TcpServer</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">acceptingConnection</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">syncStart</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="nc">ServerSocket</span> <span class="n">serverSocket</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ServerSocket</span><span class="o">(</span><span class="mi">9876</span><span class="o">);</span>
        <span class="n">acceptingConnection</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">acceptingConnection</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(1)</b>
            <span class="nc">Socket</span> <span class="n">socket</span> <span class="o">=</span> <span class="n">serverSocket</span><span class="o">.</span><span class="na">accept</span><span class="o">();</span>
            <span class="c1">// ... handle the socket</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">stop</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">acceptingConnection</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>la boucle va recommencer tant que la variable <code>acceptingConnection</code> sera <em>vraie</em>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_do_while">2.2.4. do while</h4>
<div class="paragraph">
<p>Dans le cas où l’évaluation de la condition nécessite d’être faite à l’issue de l’exécution du bloc, il est possible d’utiliser une boucle <code>do while</code>.</p>
</div>
<div class="listingblock">
<div class="title">Listing 18. Fichier TcpServer.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MeteoWebServiceCaller</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">MeteoHttpClient</span> <span class="n">client</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">MeteoWebServiceCaller</span><span class="o">(</span><span class="nc">MeteoHttpClient</span> <span class="n">client</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">client</span> <span class="o">=</span> <span class="n">client</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">getTemperatureWithRetry</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="nc">NetworkFailureException</span> <span class="n">error</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span> // <b class="conum">(1)</b>
        <span class="kt">int</span> <span class="n">tryCount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="k">do</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">client</span><span class="o">.</span><span class="na">getTemperature</span><span class="o">();</span> // <b class="conum">(2)</b>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(3)</b>
                <span class="n">error</span> <span class="o">=</span> <span class="n">e</span><span class="o">;</span>
                <span class="n">tryCount</span><span class="o">++;</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">while</span> <span class="o">(</span><span class="n">error</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">tryCount</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="o">);</span> // <b class="conum">(4)</b>
        <span class="k">throw</span> <span class="n">error</span><span class="o">;</span> // <b class="conum">(5)</b>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>la variable <code>error</code> est initialisée avec <code>null</code>, c’est-à-dire qu’elle ne pointe vers aucune adresse mémoire</p>
</li>
<li>
<p>si la méthode <code>getTemperature</code> ne renvoie pas d’erreur, on sort de la méthode <code>callWebService</code> en retournant le résultat</p>
</li>
<li>
<p>si la méthode <code>getTemperature</code> renvoie une erreur de type <code>IOException</code>, alors on affecte l’erreur à la variable <code>error</code> et on incrémente la valeur de la variable <code>tryCount</code> de 1</p>
</li>
<li>
<p>le bloc <code>do</code> est recommencé s’il y une erreur et que le compteur <code>tryCount</code> est inférieur à 4</p>
</li>
<li>
<p>si l’exécution arrive ici, c’est qu’il y a eu une erreur, et on lance la dernière stockée dans la variable <code>error</code></p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_break_et_continue">2.2.5. break et continue</h4>
<div class="paragraph">
<p>Dans toutes les boucles il est possible d’utiliser les mots-clés <code>break</code> et <code>continue</code>.</p>
</div>
<div class="paragraph">
<p>L’instruction <code>break</code> permet de sortir immédiatement de la boucle.</p>
</div>
<div class="paragraph">
<p>L’instruction <code>continue</code> permet de stopper l’exécution de l’itération courante et de passer à la prochaine, s’il y en a une.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exceptions">2.3. Exceptions</h3>
<div class="paragraph">
<p>Les exceptions en Java sont une des deux formes de retour d’une méthode.<br>
Celle-ci peut se terminer en succès et renvoyer une donnée (rien si sont type de retour est <code>void</code>) ou <em>lancer</em> une erreur.</p>
</div>
<div class="paragraph">
<p>Une erreur remonte la pile d’appel jusqu’à être interceptée.<br>
Si elle n’est jamais interceptée, elle provoque l’arrêt du thread.<br>
Dans le cas du thread principal (découlant de la fonction <code>main</code>), c’est l’application qui s’arrête.</p>
</div>
<div class="paragraph">
<p>Pour lancer une erreur, on utilise le mot-clé <code>throw</code>.<br>
Le mot-clé <code>throws</code> (avec un <code>s</code>) lui permet de déclarer qu’une méthode est susceptible de lancer un certain nombre d’erreurs.<br>
Par exemple :</p>
</div>
<div class="listingblock">
<div class="title">Listing 19. Fichier MathUtils.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MathUtils</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">divide</span><span class="o">(</span><span class="kt">int</span> <span class="n">dividend</span><span class="o">,</span> <span class="kt">int</span> <span class="n">divisor</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IllegalArgumentException</span> <span class="o">{</span> // <b class="conum">(1)</b>
        <span class="k">if</span> <span class="o">(</span><span class="n">divisor</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">"Cannot divide by 0"</span><span class="o">);</span> // <b class="conum">(2)</b>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">dividend</span> <span class="o">/</span> <span class="n">divisor</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>la méthode <code>divide</code> déclare qu’elle peut lancer une erreur de type <code>IllegalArgumentException</code></p>
</li>
<li>
<p>si le second paramètre de la méthode est 0, une erreur est lancée</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Pour intercepter des erreurs, on utilise un bloc <code>try catch</code>.<br>
Par exemple :</p>
</div>
<div class="listingblock">
<div class="title">Listing 20. Fichier Launcher.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Launcher</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">dividend</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">]);</span>
        <span class="kt">int</span> <span class="n">divisor</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">1</span><span class="o">]);</span>
        <span class="k">try</span> <span class="o">{</span> // <b class="conum">(1)</b>
            <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MathUtils</span><span class="o">().</span><span class="na">divide</span><span class="o">(</span><span class="n">dividend</span><span class="o">,</span> <span class="n">divisor</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result</span><span class="o">);</span> // <b class="conum">(2)</b>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IllegalArgumentException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(3)</b>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"An error has occurred: "</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span> // <b class="conum">(4)</b>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>déclaration d’un bloc <code>try</code></p>
</li>
<li>
<p>cette ligne n’est pas exécutée si une erreur est lancée par la ligne précédente</p>
</li>
<li>
<p>intercepte les erreurs de type <code>IllegalArgumentException</code> lancées dans le bloc <code>try</code> associé</p>
</li>
<li>
<p>accès au message de l’erreur, on l’occurence : <code>Cannot divide by 0</code>;</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Toutes les erreurs pouvant être <em>lancées</em> implémentent l’interface <code>java.lang.Throwable</code>.<br>
Cette interface est implementée par 3 classes majeures, qui spécialisent leurs classes enfants :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>java.lang.Error</code> : les erreurs graves qui sont du ressort de la JVM et non de l’application. Il est conseillé de ne pas intercepter ces erreurs</p>
</li>
<li>
<p><code>java.lang.Exception</code> : exceptions dites <em>checked</em>. Il s’agit d’erreurs applicatives dont la possibilité doit être déclarée par la méthode. Cette déclaration se fait au niveau de la signature de la méthode au moyen du mot-clé <code>throws</code>. La compilation échouera si une méthode ne déclare pas une exception mais que le code à l’intérieur est susceptible de la produire. Exemple d’une de ces erreurs : <code>java.io.IOException</code> témoignant d’un problème IO (entrée / sortie), lecture d’un fichier impossible, erreur réseau, etc.</p>
</li>
<li>
<p><code>java.lang.RuntimeException</code> : exceptions dites <em>unchecked</em>. Il s’agit d’erreurs applicatives dont la possibilité peut ne pas être déclarée par la méthode. Il est cependant recommandé de documenter cette possibilité en rajoutant l’exception dans la signature de la méthode. Exemple d’une de ces erreurs : <code>java.lang.IllegalArgumentException</code> témoignant du mauvais usage d’une méthode.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_interfaces">2.4. Interfaces</h3>
<div class="paragraph">
<p>Les interfaces sont des contrats d’objet composables.<br>
Ce contrat contient des signatures de méthodes qu’un objet concret doit définir s’il l’implémente.<br>
Ainsi une interface n’a ni état, ni méthodes concrètes.<br>
Les champs d’une interface sont implicitement <code>public</code>, <code>static</code> et <code>final</code>, c’est-à-dire qu’il s’agit de constantes.<br>
Toutes les méthodes abstraites sont quant à elles implicitement <code>public</code>.<br>
On ne peut pas instancier une interface, mais on peut utiliser l’utiliser comme type de champ, de paramètre ou de variable.</p>
</div>
<div class="paragraph">
<p>Les interfaces permettent d’abstraire l’<span class="underline">utilisation</span> de l’<span class="underline">implémentation</span>.</p>
</div>
<div class="paragraph">
<p>L’intérêt de cette abstraction est de pouvoir substituer une implémentation par une autre sans avoir à changer le code qui l’utilise.<br>
Par exemple :</p>
</div>
<div class="listingblock">
<div class="title">Listing 21. Fichier Animal.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Animal</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="nf">name</span><span class="o">();</span>

    <span class="nc">String</span> <span class="nf">makeACry</span><span class="o">();</span>

    <span class="nc">FeedingStatus</span> <span class="nf">feed</span><span class="o">(</span><span class="nc">String</span> <span class="n">foodType</span><span class="o">);</span>

    <span class="kd">enum</span> <span class="nc">FeedingStatus</span> <span class="o">{</span> // <b class="conum">(1)</b>
        <span class="no">ACCEPTED</span><span class="o">,</span>
        <span class="no">REFUSED</span><span class="o">,</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>un type déclaré dans une interface sera implicitement <code>public</code> et <code>static</code></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Listing 22. Fichier Lion.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Lion</span> <span class="kd">implements</span> <span class="nc">Animal</span> <span class="o">{</span>
    <span class="nd">@Override</span> // <b class="conum">(1)</b>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">name</span><span class="o">()</span> <span class="o">{</span> // <b class="conum">(2)</b>
        <span class="k">return</span> <span class="s">"Lion"</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">makeACry</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"Groarrrr"</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">FeedingStatus</span> <span class="nf">feed</span><span class="o">(</span><span class="nc">String</span> <span class="n">foodType</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"meat"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">foodType</span><span class="o">)</span> <span class="o">?</span> <span class="nc">FeedingStatus</span><span class="o">.</span><span class="na">ACCEPTED</span> <span class="o">:</span> <span class="nc">FeedingStatus</span><span class="o">.</span><span class="na">REFUSED</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>annotation précisant qu’il s’agit d’une surcharge, optionnelle</p>
</li>
<li>
<p>le mot-clé <code>public</code> est nécessaire ici, il n’est pas implicite dans une classe</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Listing 23. Fichier Cow.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Cow</span> <span class="kd">implements</span> <span class="nc">Animal</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">name</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"Cow"</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">makeACry</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"Meuuuuh"</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">FeedingStatus</span> <span class="nf">feed</span><span class="o">(</span><span class="nc">String</span> <span class="n">foodType</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"grass"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">foodType</span><span class="o">)</span> <span class="o">?</span> <span class="nc">FeedingStatus</span><span class="o">.</span><span class="na">ACCEPTED</span> <span class="o">:</span> <span class="nc">FeedingStatus</span><span class="o">.</span><span class="na">REFUSED</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Listing 24. Fichier Launcher.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Launcher</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">){</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Animal</span><span class="o">&gt;</span> <span class="n">animals</span> <span class="o">=</span> <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
            <span class="k">new</span> <span class="nf">Lion</span><span class="o">(),</span>
            <span class="k">new</span> <span class="nf">Cow</span><span class="o">()</span>
        <span class="o">);</span>

        <span class="nc">String</span> <span class="n">foodType</span> <span class="o">=</span> <span class="s">"meat"</span><span class="o">;</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">Animal</span> <span class="n">animal</span> <span class="o">:</span> <span class="n">animals</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(1)</b>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"The"</span> <span class="o">+</span> <span class="n">animal</span><span class="o">.</span><span class="na">name</span><span class="o">()</span> <span class="o">+</span> <span class="s">" makes "</span> <span class="o">+</span> <span class="n">animal</span><span class="o">.</span><span class="na">cry</span><span class="o">());</span>
            <span class="kd">final</span> <span class="nc">String</span> <span class="n">eatSentence</span><span class="o">;</span>
            <span class="k">if</span> <span class="o">(</span><span class="nc">FeedingStatus</span><span class="o">.</span><span class="na">ACCEPTED</span> <span class="o">==</span> <span class="n">animal</span><span class="o">.</span><span class="na">feed</span><span class="o">(</span><span class="n">foodType</span><span class="o">))</span> <span class="o">{</span>
                <span class="n">eatSentence</span> <span class="o">=</span> <span class="s">"eats"</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="n">eatSentence</span> <span class="o">=</span> <span class="s">"refuses to eat"</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"It "</span> <span class="o">+</span> <span class="n">eatSentence</span> <span class="o">+</span> <span class="s">" "</span> <span class="o">+</span> <span class="n">foodType</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>seul le concept d’<code>Animal</code> est manipulé ici, nous garantissant que tous les objets implémentant cette interface ont les méthodes <code>name</code>, <code>cry</code> et <code>feed</code></p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_méthodes_concrètes">2.4.1. Méthodes concrètes</h4>
<div class="paragraph">
<p>Une interface peut posséder des méthodes <em>concrètes</em> statiques, souvent utilisées comme méthodes utilitaires.</p>
</div>
<div class="paragraph">
<p>Une interface peut également posséder des méthodes <em>concrètes</em> par défaut.<br>
Il s’agit la plupart du temps de comportements reposant sur d’autres méthodes abstraites permettant d’apporter une fonctionnalité de manière transverse à toutes les classes implémentant cette interface.</p>
</div>
<div class="paragraph">
<p>L’intérêt de cette approche est que cet ajout de fonctionnalité, contrairement à l’utilisation d’une classe abstraite, garde une caractéristique principale des interfaces : la composition.</p>
</div>
<div class="paragraph">
<p>En effet, un objet peut implémenter plusieurs interfaces.</p>
</div>
<div class="listingblock">
<div class="title">Listing 25. Fichier Animal.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Animal</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="nf">name</span><span class="o">();</span>

    <span class="k">default</span> <span class="nc">String</span> <span class="nf">formattedName</span><span class="o">()</span> <span class="o">{</span> // <b class="conum">(1)</b>
        <span class="k">return</span> <span class="nf">name</span><span class="o">().</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">).</span><span class="na">toUpperCase</span><span class="o">()</span> <span class="o">+</span> <span class="n">name</span><span class="o">().</span><span class="na">substring</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">toLowerCase</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>méthode disponible sur tous les objets implémentant cette interface, peu importe la manière dont la méthode abstraite <code>name</code> est implémentée</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_classes_abstraites">2.5. Classes abstraites</h3>
<div class="paragraph">
<p>Si une classe peut implémenter plusieurs interfaces, elle ne peut hériter que d’une seule classe parente.<br>
On parle alors d’héritage, et l’héritage multiple n’existe pas en Java.<br>
On oppose le concept de composition, plus souple, au concept d’héritage, souvent décrié car peu évolutif.</p>
</div>
<div class="paragraph">
<p>Une classe concrète peut hériter d’une classe abstraite en implémentant toutes ses méthodes abstraites.<br>
Une classe abstraite peut donc avoir des méthodes concrètes, mais aussi des méthodes abstraites, à l’instar d’une interface.</p>
</div>
<div class="paragraph">
<p>Par exemple :</p>
</div>
<div class="listingblock">
<div class="title">Listing 26. Fichier Animal.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Animal</span> <span class="o">{</span>
    <span class="kd">protected</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>

    <span class="kd">protected</span> <span class="nf">Animal</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">formattedName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">).</span><span class="na">toUpperCase</span><span class="o">()</span> <span class="o">+</span> <span class="n">name</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">toLowerCase</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">abstract</span> <span class="nc">FeedingStatus</span> <span class="nf">feed</span><span class="o">(</span><span class="nc">String</span> <span class="n">foodType</span><span class="o">);</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_le_langage_java_troisième_partie">3. Le langage Java, troisième partie</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_généricité">3.1. Généricité</h3>
<div class="paragraph">
<p>Les types génériques sont un moyen d’exprimer une relation entre un type et les types utilisés par son état, les sous-types.<br>
Les collections sont des types génériques qui permettent d’exprimer le type des éléments qu’elles peuvent contenir, indépendamment de leur fonctionnement.<br>
On peut donc avoir une liste de <code>String</code>, d’<code>Integer</code>, ou de n’importe quel type d’objet.</p>
</div>
<div class="paragraph">
<p>L’intérêt d’une telle écriture est de lier un (ou plusieurs) sous-type à une instance.<br>
Ainsi en créant une liste de <code>String</code>, on ne pourra y ajouter que des <code>String</code>.</p>
</div>
<div class="paragraph">
<p>Déclarer un type générique se fait grâce aux chevrons : <code>List&lt;String&gt;</code>.<br>
Quand le ou les sous-types sont inférables par le compilateur, ils peuvent être omis en ne gardant que les chevrons : <code>List&lt;String&gt; names = new ArrayList&lt;&gt;()</code>.<br>
Cette écriture est appelée <em>diamond operator</em> en référence à la forme des deux chevrons <code>&lt;&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Il est tout à fait possible de déclarer ses propres types génériques :</p>
</div>
<div class="listingblock">
<div class="title">Listing 27. Fichier Item.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Item</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="nf">name</span><span class="o">();</span>
    <span class="kt">double</span> <span class="nf">price</span><span class="o">();</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Listing 28. Fichier Basket.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Basket</span><span class="o">&lt;</span><span class="no">I</span> <span class="kd">extends</span> <span class="nc">Item</span><span class="o">&gt;</span> <span class="o">{</span> // <b class="conum">(1)</b>

    <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="no">I</span> <span class="n">item</span><span class="o">);</span> // <b class="conum">(2)</b>

    <span class="kt">double</span> <span class="nf">totalPrice</span><span class="o">();</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>l’interface <code>Basket</code> définit un sous-type <code>I</code> qui doit implémenter l’interface <code>Item</code><br>
<code>I</code> est donc un prête-nom pour n’importe quel type implémentant <code>Item</code></p>
</li>
<li>
<p>la méthode <code>add</code> prend en paramètre un objet de type I, soit n’importe quel objet qui implémente <code>Item</code></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Listing 29. Fichier MarketItem.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MarketItem</span> <span class="kd">extends</span> <span class="nc">Item</span> <span class="o">{</span> // <b class="conum">(1)</b>

    <span class="kt">double</span> <span class="nf">weight</span><span class="o">();</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>L’interface <code>MarketItem</code> étend l’interface <code>Item</code></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Listing 30. Fichier MarketBasket.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MarketBasket</span> <span class="kd">implements</span> <span class="nc">Basket</span><span class="o">&lt;</span><span class="nc">MarketItem</span><span class="o">&gt;</span> <span class="o">{</span> // <b class="conum">(1)</b>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">double</span> <span class="no">MAX_WEIGHT_IN_KG</span> <span class="o">=</span> <span class="mf">3.0</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">MarketItem</span><span class="o">&gt;</span> <span class="n">items</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="nc">MarketItem</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(2)</b>
        <span class="k">if</span> <span class="o">(</span><span class="n">totalWeight</span><span class="o">()</span> <span class="o">+</span> <span class="n">item</span><span class="o">.</span><span class="na">weight</span><span class="o">()</span> <span class="o">&gt;</span> <span class="no">MAX_WEIGHT_IN_KG</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(3)</b>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">MarketBasketFullException</span><span class="o">(</span><span class="s">"Carry these water bottles yourself !"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">items</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">double</span> <span class="nf">totalWeight</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">items</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">mapToDouble</span><span class="o">(</span><span class="nl">MarketItem:</span><span class="o">:</span><span class="n">weight</span><span class="o">).</span><span class="na">sum</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">totalPrice</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">items</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">mapToDouble</span><span class="o">(</span><span class="nl">MarketItem:</span><span class="o">:</span><span class="n">price</span><span class="o">).</span><span class="na">sum</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>la classe <code>MarketBasket</code> implémente l’interface <code>Basket</code> avec comme sous-type <code>I</code> de celle-ci l’interface <code>MarketItem</code></p>
</li>
<li>
<p>la méthode <code>add</code> ne pourra prendre en paramètre que des objets qui implémentent <code>MarketItem</code></p>
</li>
<li>
<p>si le poids du panier avec le nouvel élément dépasse le max, une erreur est lancée</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_collections">3.2. Collections</h3>
<div class="paragraph">
<p>À la différence des tableaux, les collections sont des objets, ont des méthodes et la plupart du temps, leur taille peut varier.</p>
</div>
<div class="paragraph">
<p>Ces structures de données se spécialisent au travers de plusieurs interfaces et classes fournies par la bibliothèque standard, mais toutes implémentent l’interface <code>java.lang.Iterable</code>.</p>
</div>
<div class="paragraph">
<p>Cette interface est tout ce dont a besoin la machine virtuelle pour itérer.<br>
En effet, cette interface comporte principalement une méthode <code>iterator</code> renvoyant un objet de type <code>java.util.Iterator</code>.<br>
A son tour cette interface a deux méthodes :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>hasNext</code> renvoyant un <code>boolean</code></p>
</li>
<li>
<p><code>next</code> renvoyant un objet ou lançant une <code>NoSuchElementException</code> s’il n’y a plus d’éléments à parcourir</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ainsi en appelant la méthode <code>Iterable#iterator()</code>, on récupère un curseur permettant d’itérer sur les éléments d’un ensemble.<br>
Mais rien ne précise si cet ensemble est fini.</p>
</div>
<div class="listingblock">
<div class="title">Listing 31. Fichier NameUtils.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">NameUtils</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">displayNames</span><span class="o">(</span><span class="nc">Iterable</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">names</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Iterator</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">namesIterator</span> <span class="o">=</span> <span class="n">names</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span> // <b class="conum">(1)</b>
        <span class="k">while</span> <span class="o">(</span><span class="n">namesIterator</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span> // <b class="conum">(2)</b>
            <span class="nc">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">namesIterator</span><span class="o">.</span><span class="na">next</span><span class="o">();</span> // <b class="conum">(3)</b>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>création d’un nouvel <code>Iterator</code></p>
</li>
<li>
<p>tant qu’il y aura un élément <em>après</em>, la boucle continuera</p>
</li>
<li>
<p>on fait avancer d’un cran le curseur en lui demandant de renvoyer le prochain élément</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>C’est l’interface <code>java.util.Collection</code> qui apporte, entre autres, la méthode <code>size</code> et ainsi spécialise ses sous-types en ensembles d’éléments <span class="underline">finis</span>.<br>
Elle apporte également des méthodes pour ajouter, supprimer et chercher des éléments dans l’ensemble.</p>
</div>
<div class="paragraph">
<p>Les opérations d’ajout, de recherche ou de suppression d’éléments reposent sur les deux fonctions d’identité, <code>equals</code> et <code>hashCode</code>.<br>
Ainsi tout élément placé dans une collection doit ré-implémenter ces deux méthodes.<br>
Dans le cas contraire, les méthodes des collections ne se comporteront pas comme attendu.</p>
</div>
<div class="sect3">
<h4 id="_list">3.2.1. List</h4>
<div class="paragraph">
<p>La caractéristique principale de l’interface <code>java.util.List</code>, est qu’elle garantit que les éléments de l’ensemble sont <span class="underline">ordonnés</span>.<br>
Cette interface apporte donc des méthodes pour ajouter ou supprimer des éléments par leur index.</p>
</div>
<div class="paragraph">
<p>L’implémentation la plus simple est <code>java.util.ArrayList</code> et repose sur un stockage des éléments dans un tableau.<br>
Par défaut la taille de ce tableau est de 10.<br>
Si on essaie d’ajouter plus d’éléments que la capacité courante du tableau, la liste créera un nouveau tableau de capacité supérieure et y copiera les éléments du précédent tableau ainsi que les nouveaux.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Person</span><span class="o">&gt;</span> <span class="n">people</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span> // <b class="conum">(1)</b>
<span class="n">people</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="s">"Martin"</span><span class="o">,</span> <span class="mi">59</span><span class="o">));</span> // <b class="conum">(2)</b>
<span class="n">people</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="s">"Alice"</span><span class="o">,</span> <span class="mi">32</span><span class="o">));</span>

<span class="kt">boolean</span> <span class="n">removed</span> <span class="o">=</span> <span class="n">people</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="s">"Jane"</span><span class="o">,</span> <span class="mi">61</span><span class="o">));</span> // <b class="conum">(3)</b>

<span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="n">people</span><span class="o">.</span><span class="na">size</span><span class="o">();</span> <span class="c1">// size = 2</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>La variable <code>people</code> de type <code>List</code> pointe sur un nouvel objet de type <code>ArrayList</code></p>
</li>
<li>
<p>ajout d’un élément dans la liste</p>
</li>
<li>
<p>tentative de suppression d’un élément de la liste, qui retournera <code>false</code> car l’élément en est absent</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_set">3.2.2. Set</h4>
<div class="paragraph">
<p>La caractéristique principale de l’interface <code>java.util.Set</code>, est qu’elle garantit qu’il n’y a pas de <span class="underline">doublons</span> dans l’ensemble.<br>
Ainsi insérer plus d’une fois un même objet dans l’ensemble ne fera rien.</p>
</div>
<div class="paragraph">
<p>L’implémentation la plus simple est <code>java.util.HashSet</code> et repose sur une <code>java.util.HashMap</code>, en stockant les éléments en tant que clés de la <code>Map</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Person</span><span class="o">&gt;</span> <span class="n">people</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashSet</span><span class="o">&lt;&gt;();</span> // <b class="conum">(1)</b>
<span class="n">people</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="s">"Martin"</span><span class="o">,</span> <span class="mi">59</span><span class="o">));</span>
<span class="n">people</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="s">"Alice"</span><span class="o">,</span> <span class="mi">32</span><span class="o">));</span>
<span class="n">people</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="s">"Martin"</span><span class="o">,</span> <span class="mi">59</span><span class="o">));</span> // <b class="conum">(2)</b>

<span class="kt">boolean</span> <span class="n">removed</span> <span class="o">=</span> <span class="n">people</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="s">"Martin"</span><span class="o">,</span> <span class="mi">59</span><span class="o">));</span> // <b class="conum">(3)</b>

<span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="n">people</span><span class="o">.</span><span class="na">size</span><span class="o">();</span> <span class="c1">// size = 1</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>La variable <code>people</code> de type <code>Set</code> pointe sur un nouvel objet de type <code>HashSet</code></p>
</li>
<li>
<p>cet ajout n’aura aucun effet, car l’ensemble contient déjà cet élément</p>
</li>
<li>
<p>suppression d’un élément, qui retournera <code>true</code> car l’élément était bien présent</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_map">3.2.3. Map</h4>
<div class="paragraph">
<p>L’interface <code>java.util.Map</code> n’implémente pas <code>java.util.Collection</code>, ni même <code>java.lang.Iterable</code> en Java, mais on la considère néanmoins comme "une collection" du fait de son usage similaire.<br>
Il s’agit d’un ensemble d’associations clé &#8594; valeur.</p>
</div>
<div class="paragraph">
<p>L’implémentation la plus simple est <code>java.util.HashMap</code> et repose sur le principe de clé de hachage, calculée grâce à la méthode <code>hashCode</code>.<br>
L’état d’une <code>HashMap</code> est stocké dans un tableau, de taille 16 par défaut.</p>
</div>
<div class="paragraph">
<p>Quand on ajoute une paire (clé &#8594; valeur), le <code>hashCode</code> de la clé est calculé.<br>
Ensuite on applique à cette valeur l’opérateur modulo <code>%</code> avec la taille du tableau.<br>
Ainsi on obtient un index compris entre 0 et la taille du tableau (exclue).<br>
À cet index, si la cellule est vide, on insère une liste chaînée (<code>java.util.LinkedList</code>) avec comme seul élément la valeur.<br>
Si la cellule n’est pas vide, c’est qu’il y a collision, deux éléments ont un <code>hashCode</code> dont le modulo avec la taille du tableau est le même.<br>
Dans ce cas, on ajoute la valeur à la liste chaînée déjà présente.<br>
Quand le nombre d’entrées dans le tableau est supérieur à un certain seuil (le <em>load factor</em>, par défaut à 75%), un nouveau tableau du double de la taille précédente est créé et les valeurs y sont redistribuées.</p>
</div>
<div class="paragraph">
<p>L’intérêt de cette technique est qu’accéder à une valeur par sa clé prendra toujours le même temps, quelle que soit la taille de la <code>HashMap</code>.<br>
Pour savoir si un élément est dans une liste, il faut la parcourir jusqu’à tomber sur l’élément en question ou la fin de la liste.<br>
Avec une <code>HashMap</code> on calculera le <code>hashCode</code> de l’élément à trouver, et en considérant qu’il n’y a pas de collision (en pratique il y en a peu), il suffit d’accéder à l’index du tableau correspondant.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Person</span><span class="o">&gt;</span> <span class="n">peopleByName</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
<span class="n">people</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"Martin"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="s">"Martin"</span><span class="o">,</span> <span class="mi">59</span><span class="o">));</span> // <b class="conum">(1)</b>
<span class="n">people</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"Alice"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="s">"Alice"</span><span class="o">,</span> <span class="mi">32</span><span class="o">));</span>
<span class="n">people</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"Martin"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="s">"Martin"</span><span class="o">,</span> <span class="mi">23</span><span class="o">));</span> // <b class="conum">(2)</b>

<span class="nc">Person</span> <span class="n">martin</span> <span class="o">=</span> <span class="n">people</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"Martin"</span><span class="o">);</span> // <b class="conum">(3)</b>

<span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="n">people</span><span class="o">.</span><span class="na">size</span><span class="o">();</span> <span class="c1">// size = 2</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>ajout d’une valeur de type <code>Person</code> associée à une clé de type <code>String</code></p>
</li>
<li>
<p>remplacement de la valeur à la clé <code>"Martin"</code></p>
</li>
<li>
<p>accès à une valeur par sa clé</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_streams">3.3. Streams</h3>
<div class="paragraph">
<p>Les streams, ou flux, sont inspirés de la programmation fonctionnelle qui tend à transformer des ensembles d’objets en d’autres ensembles d’objets grâce à des <em>fonctions</em> simples et composables.</p>
</div>
<div class="paragraph">
<p>Les streams en Java sont des pipelines de transformation qui implémentent l’interface générique <code>java.util.stream.Stream</code>.</p>
</div>
<div class="paragraph">
<p>Un stream peut être obtenu de plusieurs façons, les plus fréquentes étant :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>à partir de valeurs :</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>Stream&lt;Integer&gt; ages = Stream.of(1, 4, 5, 4568);</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>à partir d’une <code>Collection</code> :</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>Set&lt;String&gt; names = Set.of("Donald", "Daisy");
Stream&lt;String&gt; nameStream = names.stream();</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>à partir d’un itérateur</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>List&lt;String&gt; languages = List.of(
        "Java",
        "Kotlin",
        "Scala",
        "Go",
        "Rust");
Iterator&lt;String&gt; languageIterator = languages.iterator();
Stream&lt;String&gt; languageStream = StreamSupport.stream(
        Spliterators.spliteratorUnknownSize(
                languageIterator,
                Spliterator.ORDERED)
        , false);</pre>
</div>
</div>
<div class="paragraph">
<p>Un <code>Stream&lt;T&gt;</code> supporte principalement 3 façons d’appliquer des transformations :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>map</code></p>
<div class="ulist">
<ul>
<li>
<p>transforme un ensemble d’objets en un nouvel ensemble de même taille</p>
</li>
<li>
<p>prend en paramètre une <code>Function&lt;T, U&gt;</code> transformant un objet de type <code>T</code> en un objet de type <code>U</code></p>
</li>
<li>
<p>renvoie un nouveau <code>Stream&lt;U&gt;</code> en appliquant la fonction sur chacun des éléments</p>
</li>
<li>
<p>exemple :</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>Set&lt;Person&gt; people = Set.of(
        new Person("Donald", 32),
        new Person("Daisy", 33)
);
Stream&lt;Integer&gt; ageStream = people.stream().map(p -&gt; p.age);</pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/stream_op_map.png" alt="stream op map">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>filter</code></p>
<div class="ulist">
<ul>
<li>
<p>transforme un ensemble d’objets en un nouvel ensemble de même taille ou de taille inférieure</p>
</li>
<li>
<p>prend en paramètre un <code>Predicate&lt;T&gt;</code> transformant un objet de type <code>T</code> en un <code>boolean</code></p>
</li>
<li>
<p>renvoie un nouveau <code>Stream&lt;T&gt;</code> en ne gardant que les éléments pour lesquels le prédicat a renvoyé <code>true</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>Set&lt;Person&gt; people = Set.of(
        new Person("Donald", 32),
        new Person("Daisy", 33),
        new Person("Riri", 10),
        new Person("Fifi", 11),
        new Person("Loulou", 12)

);
Stream&lt;Person&gt; adultStream = people.stream().filter(p -&gt; p.age &gt; 18);</pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/stream_op_filter.png" alt="stream op filter">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>flatMap</code></p>
<div class="ulist">
<ul>
<li>
<p>transforme un ensemble d’objets en un nouvel ensemble, la plupart du temps de taille supérieure</p>
</li>
<li>
<p>prend en paramètre une fonction <code>Function&lt;T, Stream&lt;U&gt;&gt;</code> transformant un objet de type <code>T</code> en un stream d’objets de type <code>U</code></p>
</li>
<li>
<p>renvoie un nouveau <code>Stream&lt;U&gt;</code> étant la concaténation des streams résultant de l’application de la fonction à chacun des éléments.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;</span> <span class="n">students</span> <span class="o">=</span> <span class="nc">Set</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
        <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"Alix"</span><span class="o">,</span> <span class="mf">12.2</span><span class="o">,</span> <span class="mf">4.0</span><span class="o">,</span> <span class="mf">14.0</span><span class="o">),</span>
        <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"Ilian"</span><span class="o">,</span> <span class="mf">11.3</span><span class="o">,</span> <span class="mf">18.5</span><span class="o">,</span> <span class="mf">14.0</span><span class="o">),</span>
        <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"Robin"</span><span class="o">,</span> <span class="mf">15.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">,</span> <span class="mf">16.0</span><span class="o">)</span>

<span class="o">);</span>
<span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">Double</span><span class="o">&gt;</span> <span class="n">gradeStream</span> <span class="o">=</span> <span class="n">students</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">flatMap</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="o">.</span><span class="na">grades</span><span class="o">.</span><span class="na">stream</span><span class="o">());</span></code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/stream_op_flatmap.png" alt="stream op flatmap">
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>Afin de transformer un stream en collection, on utilise l’<em>opération terminale</em> <code>collect</code>.<br>
Cette méthode prend en paramètre un <code>java.util.stream.Collector</code> dont les principales implémentations peuvent être construites grâce aux méthodes utilitaires de la classe <code>java.util.stream.Collectors</code>.</p>
</div>
<div class="paragraph">
<p>À noter que les multiples transformations ajoutées sur un stream ne sont exécutées que si nécessaire et uniquement au moment de l’appel d’une opération terminale.</p>
</div>
<div class="paragraph">
<p>Une <em>opération terminale</em>, telle que <code>count</code>, <code>collect</code>, <code>reduce</code>, etc. est une opération dont le retour nécessite l’application des transformations.<br>
Une fois une <em>opération terminale</em> appelée sur un stream, celui-ci devient inutilisable.</p>
</div>
<div class="paragraph">
<p>Par exemple :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Person</span><span class="o">&gt;</span> <span class="n">people</span> <span class="o">=</span> <span class="nc">Set</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
        <span class="k">new</span> <span class="nf">Person</span><span class="o">(</span><span class="s">"Donald"</span><span class="o">,</span> <span class="mi">32</span><span class="o">),</span>
        <span class="k">new</span> <span class="nf">Person</span><span class="o">(</span><span class="s">"Daisy"</span><span class="o">,</span> <span class="mi">33</span><span class="o">),</span>
        <span class="k">new</span> <span class="nf">Person</span><span class="o">(</span><span class="s">"Riri"</span><span class="o">,</span> <span class="mi">10</span><span class="o">),</span>
        <span class="k">new</span> <span class="nf">Person</span><span class="o">(</span><span class="s">"Fifi"</span><span class="o">,</span> <span class="mi">11</span><span class="o">),</span>
        <span class="k">new</span> <span class="nf">Person</span><span class="o">(</span><span class="s">"Loulou"</span><span class="o">,</span> <span class="mi">12</span><span class="o">)</span>

<span class="o">);</span>
<span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Person</span><span class="o">&gt;</span> <span class="n">adultStream</span> <span class="o">=</span> <span class="n">people</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                            <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">p</span> <span class="o">-&gt;</span> <span class="n">p</span><span class="o">.</span><span class="na">age</span> <span class="o">&gt;</span> <span class="mi">18</span><span class="o">)</span>
                            <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toSet</span><span class="o">());</span> // <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>construit un nouveau <code>HashSet</code> avec les deux éléments retenus par le prédicat</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Ou encore</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;</span> <span class="n">students</span> <span class="o">=</span> <span class="nc">Set</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
        <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"Alix"</span><span class="o">,</span> <span class="s">"3A"</span><span class="o">,</span> <span class="mf">12.2</span><span class="o">,</span> <span class="mf">4.0</span><span class="o">,</span> <span class="mf">14.0</span><span class="o">),</span>
        <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"Ilian"</span><span class="o">,</span> <span class="s">"3A"</span><span class="o">,</span> <span class="mf">11.3</span><span class="o">,</span> <span class="mf">18.5</span><span class="o">,</span> <span class="mf">14.0</span><span class="o">),</span>
        <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"Robin"</span><span class="o">,</span> <span class="s">"4A"</span><span class="o">,</span> <span class="mf">15.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">,</span> <span class="mf">16.0</span><span class="o">)</span>

<span class="o">);</span>
<span class="kt">double</span> <span class="n">averageGrade</span> <span class="o">=</span> <span class="n">students</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
        <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="s">"3A"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">group</span><span class="o">))</span>
        <span class="o">.</span><span class="na">flatMap</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="o">.</span><span class="na">grades</span><span class="o">.</span><span class="na">stream</span><span class="o">())</span>
        <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">averagingDouble</span><span class="o">(</span><span class="nl">Double:</span><span class="o">:</span><span class="n">doubleValue</span><span class="o">));</span> // <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Calcule la moyenne des notes des étudiants du groupe 3A</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_expressions_lambda">3.4. Expressions Lambda</h3>
<div class="paragraph">
<p>En Java tout est objet, y compris les <em>fonctions</em>.</p>
</div>
<div class="paragraph">
<p>Ainsi écrire</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Predicate</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;</span> <span class="n">groupPredicate</span> <span class="o">=</span> <span class="n">s</span> <span class="o">-&gt;</span> <span class="s">"4A"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">group</span><span class="o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>revient à créer une instance d’une implémentation à la volée de l’interface <code>Predicate</code>.</p>
</div>
<div class="paragraph">
<p>C’est fonctionnellement équivalent à :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Predicate</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;</span> <span class="n">groupPredicate</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Predicate</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;()</span> <span class="o">{</span> // <b class="conum">(1)</b>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">test</span><span class="o">(</span><span class="nc">Student</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"4A"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">group</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">};</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>construction d’une classe anonyme, construction à la volée d’une instance d’une classe non nommée et dont l’usage est localisé au bloc où elle est définie</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Ou encore à :</p>
</div>
<div class="listingblock">
<div class="title">Listing 32. Fichier GroupPredicate</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">GroupPredicate</span> <span class="kd">implements</span> <span class="nc">Predicate</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">test</span><span class="o">(</span><span class="nc">Student</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"4A"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">group</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Predicate</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;</span> <span class="n">groupPredicate</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GroupPredicate</span><span class="o">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette écriture <em>raccourcie</em> avec une flèche <code>&#8594;</code> est appelée <em>expression lambda</em> ou <em>lambda function</em>.<br>
Le type d’une expression lambda doit être inféré par le compilateur et doit être spécifié au moment de sa création, soit par le type du paramètre d’une méthode, soit par le type d’une variable (comme dans notre précédent exemple).</p>
</div>
<div class="paragraph">
<p>Le type d’une expression lambda ne peut être qu’une interface à une seule méthode <em>abstraite</em>.</p>
</div>
<div class="paragraph">
<p>Afin de garantir cette spécificité, il est possible d’annoter une interface avec <code>@FunctionalInterface</code>.<br>
Annotée de la sorte une interface qui ne possède pas de méthode abstraite ou plus d’une méthode abstraite ne compilera pas.</p>
</div>
<div class="paragraph">
<p>Il est également possible d’utiliser une référence de méthode comme fonction.<br>
Pour cela, le type de retour, le nombre et le type des paramètres doit correspondre, comme pour une expression lambda.<br>
On utilise l’opérateur <code>::</code> pour différencier cette écriture d’un appel de méthode classique.<br>
Par exemple :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kt">double</span> <span class="nf">computeAverageGrade</span><span class="o">(</span><span class="nc">Collection</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;</span> <span class="n">students</span><span class="o">,</span> <span class="nc">String</span> <span class="n">group</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">students</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
        <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="nl">Objects:</span><span class="o">:</span><span class="n">nonNull</span><span class="o">)</span> // <b class="conum">(1)</b>
        <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">group</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">group</span><span class="o">))</span>
        <span class="o">.</span><span class="na">flatMap</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="o">.</span><span class="na">grades</span><span class="o">.</span><span class="na">stream</span><span class="o">())</span>
        <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">averagingDouble</span><span class="o">(</span><span class="nl">Double:</span><span class="o">:</span><span class="n">doubleValue</span><span class="o">));</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>on ne garde que les éléments non <code>null</code> de la collection passée en paramètre de la méthode</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Une référence de méthode peut également s’écrire avec une lambda, <code>.filter(Objects::nonNull)</code> est équivalent à <code>.filter(s &#8594; Objects.nonNull(s))</code>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_le_langage_java_quatrième_partie">4. Le langage Java, quatrième partie</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_thread">4.1. Thread</h3>
<div class="paragraph">
<p>Un thread ou, fil d’exécution, est le cadre dans lequel s’exécute séquentiellement un programme.<br>
Pour exécuter plusieurs tâches en parallèle, il faut donc créer plusieurs threads.<br>
Un thread (non virtuel) consomme des ressources :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>de la mémoire</p>
</li>
<li>
<p>du CPU, ou plus exactement, de la capacité de l’OS à faire plusieurs tâches en parallèle</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>En effet, il peut (et la plupart du temps il y a) plus de threads que de cœurs de calcul (CPUs).<br>
C’est donc à l’OS d’alterner entre la pause et l’execution des threads.<br>
Plus il y a de threads, et plus l’OS passe de temps (CPU) à coordonner, laissant de moins en moins de place aux threads eux-mêmes.</p>
</div>
<div class="paragraph">
<p>En Java un thread est modélisé par la classe <code>java.lang.Thread</code> et possède un nom.<br>
Quand la JVM démarre, elle va créer (entre autres) le thread <strong>main</strong> qui exécutera la méthode <code>main</code>.</p>
</div>
<div class="paragraph">
<p>Quand un thread n’a plus de travail à exécuter, il s’arrête, et peut être <em>garbage collecté</em> si aucune variable ne pointe dessus.</p>
</div>
<div class="paragraph">
<p>La JVM s’arrête quand il n’y a plus de threads actifs (hors <code>daemon</code>).<br>
Dans le cas d’un programme simple qui ne démarre pas de nouveaux threads, une fois la méthode <code>main</code> terminée, le thread main s’arrête, il n’y a plus de thread actif, par conséquence la JVM s’arrête.</p>
</div>
<div class="paragraph">
<p>Dans le cas où des threads (hors <code>daemon</code>) ont été créés depuis le thread <code>main</code>, la JVM attendra qu’ils se terminent, même si le thread <code>main</code> est arrêté.</p>
</div>
<div class="sect3">
<h4 id="_créer_un_nouveau_thread">4.1.1. Créer un nouveau thread</h4>
<div class="paragraph">
<p>Pour démarrer un nouveau thread, il est possible de créer un nouvel objet de ce type et le démarrer.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Runnable</span> <span class="n">action</span> <span class="o">=</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"hello"</span><span class="o">);</span> // <b class="conum">(1)</b>
<span class="nc">Thread</span> <span class="n">t</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(</span><span class="n">action</span><span class="o">,</span> <span class="s">"my-super-thread-name"</span><span class="o">);</span>
<span class="n">t</span><span class="o">.</span><span class="na">start</span><span class="o">();</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Une tâche à exécuter, implémentation de l’interface fonctionnelle <code>java.lang.Runnable</code></p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_maitriser_sa_consommation">4.1.2. Maitriser sa consommation</h4>
<div class="paragraph">
<p>Comme on l’a vu, l’utilisation de thread n’est pas anodine pour une application.<br>
C’est pourquoi on choisit la plupart du temps de gérer ses threads au travers d’un mécanisme de recyclage : l’<em>object pool</em>.<br>
Ce patron de conception (design pattern) permet de définir une limite ou un comportement à un ensemble de ressources.<br>
Dans notre cas les ressources sont des threads, mais cela fonctionne également avec des connexions à une base de donnée (par exemple).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">ExecutorService</span> <span class="n">threadPool</span> <span class="o">=</span> <span class="nc">Executors</span><span class="o">.</span><span class="na">newFixedThreadPool</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span> // <b class="conum">(1)</b>
<span class="n">threadPool</span><span class="o">.</span><span class="na">submit</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"hello "</span><span class="o">));</span>
<span class="n">threadPool</span><span class="o">.</span><span class="na">submit</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"my "</span><span class="o">));</span>
<span class="n">threadPool</span><span class="o">.</span><span class="na">submit</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"name "</span><span class="o">));</span>
<span class="n">threadPool</span><span class="o">.</span><span class="na">submit</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"is "</span><span class="o">));</span>
<span class="n">threadPool</span><span class="o">.</span><span class="na">submit</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"John "</span><span class="o">));</span> // <b class="conum">(2)</b>
<span class="n">threadPool</span><span class="o">.</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">300L</span><span class="o">,</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">);</span> // <b class="conum">(3)</b>
<span class="n">threadPool</span><span class="o">.</span><span class="na">shutdown</span><span class="o">();</span> // <b class="conum">(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Création d’un <em>pool</em> de 2 threads</p>
</li>
<li>
<p>On peut soumettre plus de tâches que de threads, elles seront stockées en mémoire et traitées dès que le <em>pool</em> le pourra.<br>
Il n’y a pas de garantie d’ordre, le résultat d’un tel code n’est pas déterministe</p>
</li>
<li>
<p>Attente de la complétion de toutes les tâches envoyées au <em>pool</em></p>
</li>
<li>
<p>Libération des ressources, les 2 threads sont <em>relâchés</em> pour être <em>garbage collectés</em></p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_future">4.1.3. Future</h4>
<div class="paragraph">
<p>Afin de suivre l’évolution d’une tâche soumise au <em>pool</em>, celui-ci renvoie un objet de type <code>java.util.concurrent.Future</code>.<br>
Dans le cas d’une tâche avec un type de retour, il est également possible de faire une attente bloquante sur le résultat d’une tâche en particulier.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">ExecutorService</span> <span class="n">threadPool</span> <span class="o">=</span> <span class="nc">Executors</span><span class="o">.</span><span class="na">newFixedThreadPool</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span>
<span class="nc">Future</span><span class="o">&lt;</span><span class="nc">Double</span><span class="o">&gt;</span> <span class="n">temperatureFuture</span> <span class="o">=</span> <span class="n">threadPool</span><span class="o">.</span><span class="na">submit</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="n">callTemperatureWebSevice</span><span class="o">());</span>
<span class="nc">Future</span><span class="o">&lt;</span><span class="nc">SunIntensity</span><span class="o">&gt;</span> <span class="n">sunFuture</span> <span class="o">=</span> <span class="n">threadPool</span><span class="o">.</span><span class="na">submit</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="n">callSunshineWebSevice</span><span class="o">());</span> // <b class="conum">(1)</b>

<span class="k">try</span> <span class="o">{</span>
    <span class="nc">Double</span> <span class="n">temperature</span> <span class="o">=</span> <span class="n">temperatureFuture</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">200L</span><span class="o">,</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">);</span> // <b class="conum">(2)</b>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(3)</b>
    <span class="n">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"Call to temp WS interrupted"</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ExecutionException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(4)</b>
    <span class="n">logger</span><span class="o">.</span><span class="na">warn</span><span class="o">(</span><span class="s">"Call to temp WS failed"</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">TimeoutException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(5)</b>
    <span class="n">logger</span><span class="o">.</span><span class="na">warn</span><span class="o">(</span><span class="s">"Call to temp WS timed-out"</span><span class="o">);</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Les deux appels sont exécutés en parallèle</p>
</li>
<li>
<p>Attente bloquante de la complétion de la tâche <strong>temperature</strong>, on cas de succès on récupérera directement la valeur retournée par la méthode s’étant exécutée dans un autre thread</p>
</li>
<li>
<p>Exception survenant si le thread exécutant la tâche est interrompu</p>
</li>
<li>
<p>Exception survenant si une exception est levée par le code de la tâche</p>
</li>
<li>
<p>Exception survenant si la tâche n’est pas terminée après le délai spécifié (ici 200 ms)</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_solid">5. SOLID</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Les principes SOLID ont été énoncés par Robert Cecil Martin (Uncle Bob) et leur respect permet un design modulaire dont le principe fondamental est le <strong>découplage</strong> entre les composants.</p>
</div>
<div class="paragraph">
<p>Ce qu’on entend par découplage est la possibilité de faire un changement (ajout d’une fonctionnalité, correction d’un bug) localisé, sans impacter le reste du code.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>S - Single responsibility : Une responsabilité par classe</p>
</li>
<li>
<p>O - Open / Close : ouvert à la composition, fermé à la modification</p>
</li>
<li>
<p>L - Liskov substitution : substitution par un sous-type sans modification de la cohérence</p>
</li>
<li>
<p>I - Interface segregation : une interface (contrat) différente par client</p>
</li>
<li>
<p>D - Dependency inversion : travailler avec la forme la plus abstraite d’un objet</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_exemple_pour_s_et_l">5.1. Exemple pour <strong>S</strong> et <strong>L</strong></h3>
<div class="listingblock">
<div class="title">Listing 33. Fichier Logger.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Logger</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">log</span><span class="o">(</span><span class="nc">Level</span> <span class="n">level</span><span class="o">,</span> <span class="nc">String</span> <span class="n">message</span><span class="o">);</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Listing 34. Fichier ConsoleLogger.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConsoleLogger</span> <span class="kd">implements</span> <span class="nc">Logger</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">log</span><span class="o">(</span><span class="nc">Level</span> <span class="n">level</span><span class="o">,</span> <span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"["</span> <span class="o">+</span> <span class="n">level</span> <span class="o">+</span> <span class="s">"] "</span> <span class="o">+</span> <span class="n">message</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Listing 35. Fichier FileLogger.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FileLogger</span> <span class="kd">implements</span> <span class="nc">Logger</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Path</span> <span class="n">path</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">FileLogger</span><span class="o">(</span><span class="nc">Path</span> <span class="n">path</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">path</span> <span class="o">=</span> <span class="n">path</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">log</span><span class="o">(</span><span class="nc">Level</span> <span class="n">level</span><span class="o">,</span> <span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">Files</span><span class="o">.</span><span class="na">writeString</span><span class="o">(</span><span class="n">path</span><span class="o">,</span> <span class="s">"["</span> <span class="o">+</span> <span class="n">level</span> <span class="o">+</span> <span class="s">"] "</span> <span class="o">+</span> <span class="n">message</span> <span class="o">+</span> <span class="s">"\n"</span><span class="o">,</span> <span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">,</span> <span class="no">CREATE</span><span class="o">,</span> <span class="no">APPEND</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">UncheckedIOException</span><span class="o">(</span><span class="s">"Cannot write log message to file: "</span> <span class="o">+</span> <span class="n">path</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Les implémentations font une chose bien précise, plutôt que d’avoir une unique classe qui gère l’écriture dans la console et dans un fichier avec un <code>if</code>.</p>
</div>
<div class="paragraph">
<p>Par ailleurs, remplacer une implémentation par une autre ne change rien pour le code qui utilise l’interface <code>Logger</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_exemple_pour_o_et_d">5.2. Exemple pour <strong>O</strong> et <strong>D</strong></h3>
<div class="listingblock">
<div class="title">Listing 36. Fichier CompositeLogger.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CompositeLogger</span> <span class="kd">implements</span> <span class="nc">Logger</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Iterable</span><span class="o">&lt;</span><span class="nc">Logger</span><span class="o">&gt;</span> <span class="n">delegates</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">CompositeLogger</span><span class="o">(</span><span class="nc">Logger</span><span class="o">...</span> <span class="n">loggers</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">delegates</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">loggers</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">log</span><span class="o">(</span><span class="nc">Level</span> <span class="n">level</span><span class="o">,</span> <span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">delegates</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">l</span> <span class="o">-&gt;</span> <span class="n">l</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="n">level</span><span class="o">,</span> <span class="n">message</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ici pour profiter de fonctionnalités de plusieurs composants, on ne va pas modifier les composants eux-mêmes, mais plutôt les composer.<br>
On pourra par la suite ajouter de nouveaux comportements (logger vers un broker ou une base de données par exemple) sans modifier, ni les composants existants, ni la logique de composition (ouvert à la composition, fermé à la modification).</p>
</div>
<div class="paragraph">
<p>Par ailleurs, on utilise la forme la plus abstraite nécessaire, ici l’interface <code>Logger</code> plutôt que des implémentations précises.<br>
Ainsi le comportement générique peut s’appliquer à tous les sous-types.</p>
</div>
</div>
<div class="sect2">
<h3 id="_exemple_pour_i">5.3. Exemple pour <strong>I</strong></h3>
<div class="listingblock">
<div class="title">Listing 37. Fichier Vehicule.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Vehicule</span> <span class="o">{</span>

    <span class="kt">void</span> <span class="nf">startMoving</span><span class="o">();</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Listing 38. Fichier Container.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Container</span> <span class="o">{</span>

    <span class="kt">void</span> <span class="nf">addItem</span><span class="o">(</span><span class="nc">Item</span> <span class="n">item</span><span class="o">);</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Listing 39. Fichier Car.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Car</span> <span class="kd">implements</span> <span class="nc">Vehicule</span><span class="o">,</span> <span class="nc">Container</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Item</span><span class="o">&gt;</span> <span class="n">trunk</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">startMoving</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">startEngine</span><span class="o">();</span>
        <span class="n">pressAccelerator</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addItem</span><span class="o">(</span><span class="nc">Item</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">trunk</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>La classe <code>Car</code> se comporte à la fois comme un véhicule, mais également comme un conteneur, de part sa capacité à stocker des objets dans son coffre.</p>
</div>
<div class="paragraph">
<p>Cependant les classes intéressées par la capacité d’une voiture à se déplacer ne sont pas forcément les mêmes que celles intéressées par le fait de pouvoir stocker des objets dedans.</p>
</div>
<div class="paragraph">
<p>On peut donc choisir d’implémenter plusieurs interfaces, chacune en lien avec un domaine différent, laissant la possibilité au code appelant de travailler avec une version plus abstraite et de décrire des comportements plus génériques.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_écosystème_java">6. Écosystème Java</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_maven">6.1. Maven</h3>
<div class="paragraph">
<p><strong>Maven</strong> est un outil de construction de projet créé initialement pour Java.<br>
Il permet entre autres de déclarer ses dépendances, compiler le code, construire les binaires et lancer les tests.<br>
C’est aujourd’hui le plus utilisé dans l’écosystème Java.<br>
Il en existe d’autres qui sont moins répandus ou dédiés à un autre langage comme Gradle, SBT, Ivy, Bazel, Make, etc.</p>
</div>
<div class="paragraph">
<p>Comme beaucoup d’outils de développement (frameworks, intégration continue, IDE, etc.), Maven repose sur une architecture modulaire.<br>
Dans cette architecture, le coeur d’exécution n’apporte que peu de fonctionnalités, mais propose une API pour venir ajouter des fonctionnalités par composition.</p>
</div>
<div class="paragraph">
<p>Par défaut Maven suit un enchaînement de phases (lifecycle), auxquelles sont associées des plugins par défaut :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven_lifecycle.png" alt="maven lifecycle">
</div>
</div>
<div class="paragraph">
<p>Par exemple, associée à la phase <strong>test</strong>, c’est le <em>goal</em> <strong>test</strong> du plugin <strong>maven-surefire-plugin</strong> qui est exécuté.<br>
Pour lancer cette phase, on écrira :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">mvn <span class="nb">test</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette commande lancera toutes les phases précédentes, charge aux plugins de ne rien faire si le travail est déjà fait (compilation par exemple).</p>
</div>
<div class="paragraph">
<p>Il s’agit d’un comportement par défaut.<br>
En effet, Maven fonctionne par <em>convention</em> plutôt que par <em>configuration explicite</em>.<br>
Même s’il reste possible de configurer Maven pour sortir du comportement par défaut, la plupart des projets préfèrent la simplicité et profitent du même coup d’une structure similaire, ce qui facilite la lecture, et l’utilisation d’outils tiers comme les serveurs d’intégration continue, les solutions SAAS d’analyse statique, etc.</p>
</div>
<div class="paragraph">
<p>Voici la structure d’un projet Maven :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">pom.xml # <b class="conum">(1)</b>
src/ # <b class="conum">(2)</b>
|-- main/ # <b class="conum">(3)</b>
|   |-- java/ # <b class="conum">(4)</b>
|       |-- com/
|           |-- mycompany/
|               |-- App.java
|-- <span class="nb">test</span>/ # <b class="conum">(5)</b>
    |-- java/
        |-- com/
            |-- mycompany/
                |-- AppTests.java
target/ # <b class="conum">(6)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Le fichier <strong>pom.xml</strong> décrit toutes les spécificités du projet (coordonnées, scm, dépendances, plugins supplémentaires, etc.)</p>
</li>
<li>
<p>Le répertoire <strong>src</strong> contient le code <em>écrit</em></p>
</li>
<li>
<p>le répertoire <strong>main</strong> contient le code de production, le code qui sera embarqué dans les binaires</p>
</li>
<li>
<p>le répertoire <strong>java</strong> contient le code <em>Java</em>, il est possible de faire cohabiter plusieurs languages dans des répertoires dédiés.<br>
Par exemple des fichiers *.kt dans un répertoire <strong>kotlin</strong> à côté du répertoire <strong>java</strong></p>
</li>
<li>
<p>le répertoire <strong>test</strong> contient le code de test, ce code ne sera <span class="underline">pas</span> embarqué dans les binaires</p>
</li>
<li>
<p>le répertoire <strong>target</strong> contient tous les fichiers que Maven va générer, les classes compilées, le résultat des tests, etc.<br>
Ce répertoire est généralement exclu du gestionnaire de code source (<strong>.gitignore</strong> pour Git)</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_anatomie_dun_fichier_pom_simple">6.1.1. Anatomie d’un fichier POM simple</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;project</span> <span class="na">xsi:schemaLocation=</span><span class="s">"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"</span>
         <span class="na">xmlns=</span><span class="s">"http://maven.apache.org/POM/4.0.0"</span>
         <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>

    <span class="nt">&lt;groupId&gt;</span>com.mycompany<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>myproject<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>0.0.1-SNAPSHOT<span class="nt">&lt;/version&gt;</span> &lt;!--<b class="conum">(1)</b>--&gt;

    <span class="nt">&lt;properties&gt;</span>
        <span class="nt">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="nt">&lt;/project.build.sourceEncoding&gt;</span>
        <span class="nt">&lt;maven.compiler.source&gt;</span>16<span class="nt">&lt;/maven.compiler.source&gt;</span>
        <span class="nt">&lt;maven.compiler.target&gt;</span>16<span class="nt">&lt;/maven.compiler.target&gt;</span> &lt;!--<b class="conum">(2)</b>--&gt;

        <span class="nt">&lt;retrofit.version&gt;</span>1.2.3.4<span class="nt">&lt;/retrofit.version&gt;</span> &lt;!--<b class="conum">(3)</b>--&gt;
        <span class="nt">&lt;maven-source-plugin.version&gt;</span>1.2.3.4<span class="nt">&lt;/maven-source-plugin.version&gt;</span>
    <span class="nt">&lt;/properties&gt;</span>

    <span class="nt">&lt;dependencies&gt;</span>  &lt;!--<b class="conum">(4)</b>--&gt;
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>com.squareup.retrofit2<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>retrofit<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>${retrofit.version}<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;/dependencies&gt;</span>

    <span class="nt">&lt;build&gt;</span>
        <span class="nt">&lt;plugins&gt;</span>  &lt;!--<b class="conum">(5)</b>--&gt;
            <span class="nt">&lt;plugin&gt;</span>
                <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
                <span class="nt">&lt;artifactId&gt;</span>maven-source-plugin<span class="nt">&lt;/artifactId&gt;</span>
                <span class="nt">&lt;version&gt;</span>${maven-source-plugin.version}<span class="nt">&lt;/version&gt;</span>
                <span class="nt">&lt;executions&gt;</span>
                    <span class="nt">&lt;execution&gt;</span>
                        <span class="nt">&lt;id&gt;</span>attach-sources<span class="nt">&lt;/id&gt;</span>
                        <span class="nt">&lt;goals&gt;</span>
                            <span class="nt">&lt;goal&gt;</span>jar-no-fork<span class="nt">&lt;/goal&gt;</span>
                        <span class="nt">&lt;/goals&gt;</span>
                    <span class="nt">&lt;/execution&gt;</span>
                <span class="nt">&lt;/executions&gt;</span>
            <span class="nt">&lt;/plugin&gt;</span>
        <span class="nt">&lt;/plugins&gt;</span>
    <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>groupId, artifactId et version forment les coordonnées uniques d’un projet quand celui-ci est publié dans un dépôt (Maven Central ou autre)</p>
</li>
<li>
<p>encodage et version du langage Java permettent de garantir que le code est modifié et compris de la même façon par les différentes parties prenantes (les développeurs et le serveur d’intégration continue)</p>
</li>
<li>
<p>versions des dépendances et plugins utilisés plus bas</p>
</li>
<li>
<p>bloc dans lequel on peut ajouter autant de <strong>dépendances</strong> que l’on souhaite en utilisant leurs coordonnées.<br>
Ici on ajoute une dépendance permettant de modéliser rapidement un client HTTP</p>
</li>
<li>
<p>bloc dans lequel on peut ajouter autant de <strong>plugins</strong> que l’on souhaite en utilisant leurs coordonnées.<br>
Ici on ajoute un plugin qui va générer un binaire contenant les <em>sources</em> du projet</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Les dépendances sont les librairies tierces que l’on souhaite utiliser dans un projet, que ce soit dans le code de production ou le code de test.<br>
Les plugins sont quant à eux des mécaniques supplémentaires que l’on souhaite ajouter au cycle de vie du projet (génération de la documentation, création d’une image docker, analyse statique du code, etc.)</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_junit">6.2. JUnit</h3>
<div class="paragraph">
<p>Les tests sont une composante importante de la programmation.<br>
Ils permettent entre autres de :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>vérifier le fonctionnement d’un bloc de code, maintenant et dans le futur</p>
</li>
<li>
<p>documenter, en montrant comment le code peut ou doit être utilisé</p>
</li>
<li>
<p>rassurer les autres membres d’une équipe de développement sur la qualité du code proposé</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cependant, la librairie standard Java ne fournit pas d’API pour écrire des tests, ni de mécanisme pour les lancer indépendamment du programme.</p>
</div>
<div class="paragraph">
<p>L’écriture de tests repose donc sur :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>une API fournie par un framework tiers, JUnit est le plus populaire</p>
</li>
<li>
<p>un plugin pour le gestionnaire de projet capable d’exécuter le framework, <strong>Surefire</strong> dans le cas de Maven</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ces spécificités sont traduites comme suit dans le fichier <strong>pom.xml</strong> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;project</span> <span class="na">xsi:schemaLocation=</span><span class="s">"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"</span>
         <span class="na">xmlns=</span><span class="s">"http://maven.apache.org/POM/4.0.0"</span>
         <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="nt">&gt;</span>

    <span class="c">&lt;!-- omitted for concision --&gt;</span>

    <span class="nt">&lt;properties&gt;</span>
        <span class="c">&lt;!-- omitted for concision --&gt;</span>

        <span class="nt">&lt;junit.version&gt;</span>5.7.1<span class="nt">&lt;/junit.version&gt;</span>
        <span class="nt">&lt;assertj.version&gt;</span>3.19.0<span class="nt">&lt;/assertj.version&gt;</span>
        <span class="nt">&lt;maven-surefire-plugin.version&gt;</span>2.22.2<span class="nt">&lt;/maven-surefire-plugin.version&gt;</span>
    <span class="nt">&lt;/properties&gt;</span>

    <span class="nt">&lt;dependencies&gt;</span>
        <span class="c">&lt;!-- other dependencies can be added here --&gt;</span>

        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.junit.jupiter<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>junit-jupiter<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>${junit.version}<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span> &lt;!--<b class="conum">(1)</b>--&gt;
        <span class="nt">&lt;/dependency&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.assertj<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>assertj-core<span class="nt">&lt;/artifactId&gt;</span> &lt;!--<b class="conum">(2)</b>--&gt;
            <span class="nt">&lt;version&gt;</span>${assertj.version}<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;/dependencies&gt;</span>

    <span class="nt">&lt;build&gt;</span>
        <span class="nt">&lt;pluginManagement&gt;</span>
            <span class="nt">&lt;plugins&gt;</span>
                <span class="nt">&lt;plugin&gt;</span>
                    <span class="nt">&lt;artifactId&gt;</span>maven-surefire-plugin<span class="nt">&lt;/artifactId&gt;</span>
                    <span class="nt">&lt;version&gt;</span>${maven-surefire-plugin.version}<span class="nt">&lt;/version&gt;</span> &lt;!--<b class="conum">(3)</b>--&gt;
                <span class="nt">&lt;/plugin&gt;</span>
            <span class="nt">&lt;/plugins&gt;</span>
        <span class="nt">&lt;/pluginManagement&gt;</span>
    <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>déclaration de la dépendance JUnit en <em>scope</em> <strong>test</strong>, elle ne sera pas disponible pour le code de production (dans <strong>src/main/java</strong>), uniquement pour le code de test (dans <strong>src/test/java</strong>)</p>
</li>
<li>
<p>déclaration d’une dépendance permettant d’écrire des vérifications (la plus populaire, mais d’autres existent)</p>
</li>
<li>
<p>surcharge de la version du plugin <strong>Surefire</strong> avec la dernière version, Maven 3 ne prenant pas la dernière version par défaut, et seules les dernières versions sont compatibles avec les dernières versions de JUnit</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>En Java, les tests sont principalement représentés par des méthodes.<br>
Par défaut, le plugin <strong>Surefire</strong> va rechercher les méthodes de test dans les classes dont le nom fini par <code>Test</code>, <code>Tests</code> ou <code>TestCase</code>.</p>
</div>
<div class="paragraph">
<p>Pour tester le code suivant :</p>
</div>
<div class="listingblock">
<div class="title">Listing 40. Fichier src/main/java/com/lernejo/math/MathUtils.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kn">package</span> <span class="nn">com.lernejo.math</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MathUtils</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">fact</span><span class="o">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">n</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">"N cannot be negative"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="n">n</span> <span class="o">*</span> <span class="n">fact</span><span class="o">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut écrire cette classe de test :</p>
</div>
<div class="listingblock">
<div class="title">Listing 41. Fichier src/test/java/com/lernejo/math/MathUtilsTest.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kn">package</span> <span class="nn">com.lernejo.math</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.assertj.core.api.Assertions</span><span class="o">;</span> // <b class="conum">(1)</b>
<span class="kn">import</span> <span class="nn">org.junit.jupiter.api.Test</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">MathUtilsTest</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">MathUtils</span> <span class="n">mathUtils</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MathUtils</span><span class="o">();</span>

    <span class="nd">@Test</span> // <b class="conum">(2)</b>
    <span class="kt">void</span> <span class="nf">fact_of_negative_number_throws</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Assertions</span><span class="o">.</span><span class="na">assertThatExceptionOfType</span><span class="o">(</span><span class="nc">IllegalArgumentException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
                <span class="o">.</span><span class="na">isThrownBy</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="n">mathUtils</span><span class="o">.</span><span class="na">fact</span><span class="o">(-</span><span class="mi">1</span><span class="o">))</span>
                <span class="o">.</span><span class="na">withMessage</span><span class="o">(</span><span class="s">"N cannot be negative"</span><span class="o">);</span> // <b class="conum">(3)</b>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">fact_of_3_is_6</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">mathUtils</span><span class="o">.</span><span class="na">fact</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>
        <span class="nc">Assertions</span><span class="o">.</span><span class="na">assertThat</span><span class="o">(</span><span class="n">result</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="mi">6</span><span class="o">);</span> // <b class="conum">(4)</b>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><em>Import</em> des classes publiques des dépendances de test</p>
</li>
<li>
<p>Une méthode de test est <em>marquée</em> par une annotation afin de la différencier d’une méthode utilitaire ou interne au test.<br>
Le framework ne lancera que les méthodes identifiées comme des méthodes de test</p>
</li>
<li>
<p>Utilisation de la librairie de vérification pour s’assurer qu’une exception est levée quand on appelle la méthode avec un mauvais paramètre.<br>
On vérifie également le contenu du message d’erreur.</p>
</li>
<li>
<p>Utilisation de la librairie de vérification pour s’assurer que le résultat de <code>3!</code> est bien <code>6</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Une méthode de test a une structure bien précise :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>zero</strong>, <strong>une</strong> ou <strong>plusieurs</strong> mises en condition initiale.<br>
Il s’agit généralement de constituer un jeu de données ou d’amener le système dans un certain état</p>
</li>
<li>
<p><strong>un unique</strong> élément déclencheur.<br>
Il s’agit de l’appel au bloc de code que l’on souhaite tester.</p>
</li>
<li>
<p><strong>une</strong> ou <strong>plusieurs</strong> vérifications sur l’état de sortie, que ce soit le retour de la méthode testée ou des données accessibles autrement (persistées en base de donnée par exemple)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Dans le cas ou l’on souhaite écrire plusieurs tests similaires à l’exception du jeu de données, il est possible d’écrire des <span class="underline">tests paramétrés</span> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nd">@ParameterizedTest</span> // <b class="conum">(1)</b>
<span class="nd">@CsvSource</span><span class="o">({</span> // <b class="conum">(2)</b>
    <span class="s">"0, 1"</span><span class="o">,</span>
    <span class="s">"1, 1"</span><span class="o">,</span>
    <span class="s">"2, 2"</span><span class="o">,</span>
    <span class="s">"3, 6"</span><span class="o">,</span>
    <span class="s">"4, 24"</span><span class="o">,</span>
    <span class="s">"13, 1932053504"</span>
<span class="o">})</span>
<span class="kt">void</span> <span class="nf">fact_test_cases</span><span class="o">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">,</span> <span class="kt">int</span> <span class="n">expectedResult</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(3)</b>
    <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">mathUtils</span><span class="o">.</span><span class="na">fact</span><span class="o">(</span><span class="n">n</span><span class="o">);</span>
    <span class="nc">Assertions</span><span class="o">.</span><span class="na">assertThat</span><span class="o">(</span><span class="n">result</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">expectedResult</span><span class="o">);</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Marque la méthode comme test paramétré</p>
</li>
<li>
<p>Déclare les jeux de données à utiliser, la méthode sera appelée autant de fois que de jeux de donnée, ici 6 fois</p>
</li>
<li>
<p>Le framework se charge d’appeler la méthode avec les paramètres dans l’ordre où ils ont été déclarés</p>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusion">Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Ce cours vous a permis de voir un panel des fonctionnalités du langage Java ainsi qu’un aperçu de l’écosystème qui l’entoure.</p>
</div>
<div class="paragraph">
<p>Il reste bien d’autres choses à explorer, que ce soit dans le langage lui-même, avec l’introspection, les proxys dynamiques, les plugins de compilateur (APT), etc. ou dans l’écosystème qui l’entoure, avec les tests par mutation, la génération de la documentation vivante, l’analyse de code statique et dynamique&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Mais cette histoire sera pour une prochaine fois.</p>
</div>
<div class="sect2">
<h3 id="_pour_aller_plus_loin">Pour aller plus loin</h3>
<div class="ulist">
<ul>
<li>
<p>La bible de JM Doudoux : <a href="https://www.jmdoudoux.fr/accueil_java.htm" class="bare">https://www.jmdoudoux.fr/accueil_java.htm</a></p>
</li>
<li>
<p>Les vidéos de José Paumard : <a href="https://www.youtube.com/c/coursenlignejava/videos" class="bare">https://www.youtube.com/c/coursenlignejava/videos</a></p>
</li>
<li>
<p>Une description des types de couplage : <a href="https://connascence.io/" class="bare">https://connascence.io/</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
</div>
</div>
</body>
</html>